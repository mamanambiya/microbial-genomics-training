<!DOCTYPE html><html lang="en" class="no-js"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Hands-on training course for microbial genomics and metagenomics in clinical and public health applications"><meta name="author" content="CIDRI-Africa"><link href="https://cidri-africa.github.io/microbial-genomics-training/modules/day7/" rel="canonical"><link href="../day6/" rel="prev"><link href="../day8/" rel="next"><link rel="icon" href="../../assets/favicon.png"><meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.18"><title>Day 7 - Metagenomic profiling - Microbial Genomics &amp; Metagenomics Training Course</title><link rel="stylesheet" href="../../assets/stylesheets/main.7e37652d.min.css"><link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel="stylesheet" href="../../stylesheets/extra.css"><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config",""),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script><script>"undefined"!=typeof __md_analytics&&__md_analytics()</script><link href="../../assets/stylesheets/glightbox.min.css" rel="stylesheet"><script src="../../assets/javascripts/glightbox.min.js"></script><style id="glightbox-style">
            html.glightbox-open { overflow: initial; height: 100%; }
            .gslide-title { margin-top: 0px; user-select: text; }
            .gslide-desc { color: #666; user-select: text; }
            .gslide-image img { background: white; }
            .gscrollbar-fixer { padding-right: 15px; }
            .gdesc-inner { font-size: 0.75rem; }
            body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color); }
            body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color); }
            body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color); }
        </style></head> <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="amber"> <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off"> <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off"> <label class="md-overlay" for="__drawer"></label> <div data-md-component="skip"> <a href="#day-7-advanced-nextflow-version-control-with-github" class="md-skip"> Skip to content </a> </div> <div data-md-component="announce"> </div> <header class="md-header md-header--shadow md-header--lifted" data-md-component="header"> <nav class="md-header__inner md-grid" aria-label="Header"> <a href="../.." title="Microbial Genomics &amp; Metagenomics Training Course" class="md-header__button md-logo" aria-label="Microbial Genomics &amp; Metagenomics Training Course" data-md-component="logo"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 2h2v2c0 1.44.68 2.61 1.88 3.78.86.83 2.01 1.63 3.21 2.42l-1.83 1.19C8.27 10.72 7.31 10 6.5 9.21 5.07 7.82 4 6.1 4 4zm14 0h2v2c0 2.1-1.07 3.82-2.5 5.21-1.41 1.38-3.21 2.52-4.96 3.63-1.75 1.12-3.45 2.21-4.66 3.38C6.68 17.39 6 18.56 6 20v2H4v-2c0-2.1 1.07-3.82 2.5-5.21 1.41-1.38 3.21-2.52 4.96-3.63 1.75-1.12 3.45-2.21 4.66-3.38C17.32 6.61 18 5.44 18 4zm-3.26 10.61c.99.67 1.95 1.39 2.76 2.18C18.93 16.18 20 17.9 20 20v2h-2v-2c0-1.44-.68-2.61-1.88-3.78-.86-.83-2.01-1.63-3.21-2.42zM7 3h10v1l-.06.5H7.06L7 4zm.68 3h8.64c-.24.34-.52.69-.9 1.06l-.51.44H9.07l-.49-.44c-.38-.37-.66-.72-.9-1.06m1.41 10.5h5.84l.49.44c.38.37.66.72.9 1.06H7.68c.24-.34.52-.69.9-1.06zm-2.03 3h9.88l.06.5v1H7v-1z"></path></svg> </a> <label class="md-header__button md-icon" for="__drawer"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg> </label> <div class="md-header__title" data-md-component="header-title"> <div class="md-header__ellipsis"> <div class="md-header__topic"> <span class="md-ellipsis"> Microbial Genomics &amp; Metagenomics Training Course </span> </div> <div class="md-header__topic" data-md-component="header-topic"> <span class="md-ellipsis"> Day 7 - Metagenomic profiling </span> </div> </div> </div> <form class="md-header__option" data-md-component="palette"> <input class="md-option" data-md-color-media data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="amber" aria-label="Switch to dark mode" type="radio" name="__palette" id="__palette_0"> <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg> </label> <input class="md-option" data-md-color-media data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="amber" aria-label="Switch to light mode" type="radio" name="__palette" id="__palette_1"> <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for="__search"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg> </label> <div class="md-search" data-md-component="search" role="dialog"> <label class="md-search__overlay" for="__search"></label> <div class="md-search__inner" role="search"> <form class="md-search__form" name="search"> <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required> <label class="md-search__icon md-icon" for="__search"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg> </label> <nav class="md-search__options" aria-label="Search"> <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text data-md-component="search-share" tabindex="-1"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"></path></svg> </a> <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg> </button> </nav> <div class="md-search__suggest" data-md-component="search-suggest"></div> </form> <div class="md-search__output"> <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix> <div class="md-search-result" data-md-component="search-result"> <div class="md-search-result__meta"> Initializing search </div> <ol class="md-search-result__list" role="presentation"></ol> </div> </div> </div> </div> </div> <div class="md-header__source"> <a href="https://github.com/CIDRI-Africa/microbial-genomics-training" title="Go to repository" class="md-source" data-md-component="source"> <div class="md-source__icon md-icon"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"></path></svg> </div> <div class="md-source__repository"> CIDRI-Africa/microbial-genomics-training </div> </a> </div> </nav> <nav class="md-tabs" aria-label="Tabs" data-md-component="tabs"> <div class="md-grid"> <ul class="md-tabs__list"> <li class="md-tabs__item"> <a href="../.." class="md-tabs__link"> Home </a> </li> <li class="md-tabs__item"> <a href="../../course/overview/" class="md-tabs__link"> Course Information </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href="../day1/" class="md-tabs__link"> Daily Modules </a> </li> <li class="md-tabs__item"> <a href="../../datasets/" class="md-tabs__link"> Resources </a> </li> </ul> </div> </nav> </header> <div class="md-container" data-md-component="container"> <main class="md-main" data-md-component="main"> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation"> <div class="md-sidebar__scrollwrap"> <div class="md-sidebar__inner"> <nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0"> <label class="md-nav__title" for="__drawer"> <a href="../.." title="Microbial Genomics &amp; Metagenomics Training Course" class="md-nav__button md-logo" aria-label="Microbial Genomics &amp; Metagenomics Training Course" data-md-component="logo"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 2h2v2c0 1.44.68 2.61 1.88 3.78.86.83 2.01 1.63 3.21 2.42l-1.83 1.19C8.27 10.72 7.31 10 6.5 9.21 5.07 7.82 4 6.1 4 4zm14 0h2v2c0 2.1-1.07 3.82-2.5 5.21-1.41 1.38-3.21 2.52-4.96 3.63-1.75 1.12-3.45 2.21-4.66 3.38C6.68 17.39 6 18.56 6 20v2H4v-2c0-2.1 1.07-3.82 2.5-5.21 1.41-1.38 3.21-2.52 4.96-3.63 1.75-1.12 3.45-2.21 4.66-3.38C17.32 6.61 18 5.44 18 4zm-3.26 10.61c.99.67 1.95 1.39 2.76 2.18C18.93 16.18 20 17.9 20 20v2h-2v-2c0-1.44-.68-2.61-1.88-3.78-.86-.83-2.01-1.63-3.21-2.42zM7 3h10v1l-.06.5H7.06L7 4zm.68 3h8.64c-.24.34-.52.69-.9 1.06l-.51.44H9.07l-.49-.44c-.38-.37-.66-.72-.9-1.06m1.41 10.5h5.84l.49.44c.38.37.66.72.9 1.06H7.68c.24-.34.52-.69.9-1.06zm-2.03 3h9.88l.06.5v1H7v-1z"></path></svg> </a> Microbial Genomics &amp; Metagenomics Training Course </label> <div class="md-nav__source"> <a href="https://github.com/CIDRI-Africa/microbial-genomics-training" title="Go to repository" class="md-source" data-md-component="source"> <div class="md-source__icon md-icon"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"></path></svg> </div> <div class="md-source__repository"> CIDRI-Africa/microbial-genomics-training </div> </a> </div> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="../.." class="md-nav__link"> <span class="md-ellipsis"> Home </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href="../../course/overview/" class="md-nav__link"> <span class="md-ellipsis"> Course Information </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked> <div class="md-nav__link md-nav__container"> <a href="../day1/" class="md-nav__link "> <span class="md-ellipsis"> Daily Modules </span> </a> <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true"> <label class="md-nav__title" for="__nav_3"> <span class="md-nav__icon md-icon"></span> Daily Modules </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="../day2/" class="md-nav__link"> <span class="md-ellipsis"> Day 2 - Introduction to Commandline, High Performance Computing, &amp; Quality Control </span> </a> </li> <li class="md-nav__item"> <a href="../day3/" class="md-nav__link"> <span class="md-ellipsis"> Day 3 - Genomic Characterization </span> </a> </li> <li class="md-nav__item"> <a href="../day4/" class="md-nav__link"> <span class="md-ellipsis"> Day 4 - Genomic Characterization </span> </a> </li> <li class="md-nav__item"> <a href="../day5/" class="md-nav__link"> <span class="md-ellipsis"> Day 5 - Nextflow Pipeline Development </span> </a> </li> <li class="md-nav__item"> <a href="../day6/" class="md-nav__link"> <span class="md-ellipsis"> Day 6 - Nextflow Pipeline Development &amp; Version Control with GitHub </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc"> <label class="md-nav__link md-nav__link--active" for="__toc"> <span class="md-ellipsis"> Day 7 - Metagenomic profiling </span> <span class="md-nav__icon md-icon"></span> </label> <a href="./" class="md-nav__link md-nav__link--active"> <span class="md-ellipsis"> Day 7 - Metagenomic profiling </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class="md-nav__title" for="__toc"> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix> <li class="md-nav__item"> <a href="#learning-philosophy-build-it-optimize-it-share-it-deploy-it" class="md-nav__link"> <span class="md-ellipsis"> Learning Philosophy: Build it → Optimize it → Share it → Deploy it </span> </a> </li> <li class="md-nav__item"> <a href="#overview" class="md-nav__link"> <span class="md-ellipsis"> Overview </span> </a> <nav class="md-nav" aria-label="Overview"> <ul class="md-nav__list"> <li class="md-nav__item"> <a href="#the-big-picture-simple-vs-advanced-pipeline-development" class="md-nav__link"> <span class="md-ellipsis"> The Big Picture: Simple vs Advanced Pipeline Development </span> </a> <nav class="md-nav" aria-label="The Big Picture: Simple vs Advanced Pipeline Development"> <ul class="md-nav__list"> <li class="md-nav__item"> <a href="#simple-pipeline-approach-day-6-level" class="md-nav__link"> <span class="md-ellipsis"> Simple Pipeline Approach (Day 6 Level) </span> </a> </li> <li class="md-nav__item"> <a href="#advanced-pipeline-approach-day-7-level" class="md-nav__link"> <span class="md-ellipsis"> Advanced Pipeline Approach (Day 7 Level) </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="#learning-objectives" class="md-nav__link"> <span class="md-ellipsis"> Learning Objectives </span> </a> </li> <li class="md-nav__item"> <a href="#schedule" class="md-nav__link"> <span class="md-ellipsis"> Schedule </span> </a> </li> <li class="md-nav__item"> <a href="#key-topics" class="md-nav__link"> <span class="md-ellipsis"> Key Topics </span> </a> <nav class="md-nav" aria-label="Key Topics"> <ul class="md-nav__list"> <li class="md-nav__item"> <a href="#1-applied-genomics-mtb-analysis-pipeline-75-minutes" class="md-nav__link"> <span class="md-ellipsis"> 1. Applied Genomics: MTB Analysis Pipeline (75 minutes) </span> </a> </li> <li class="md-nav__item"> <a href="#2-genome-assembly-workflows-75-minutes" class="md-nav__link"> <span class="md-ellipsis"> 2. Genome Assembly Workflows (75 minutes) </span> </a> </li> <li class="md-nav__item"> <a href="#3-advanced-topics-optimization-deployment-75-minutes" class="md-nav__link"> <span class="md-ellipsis"> 3. Advanced Topics: Optimization &amp; Deployment (75 minutes) </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="#tools-and-software" class="md-nav__link"> <span class="md-ellipsis"> Tools and Software </span> </a> <nav class="md-nav" aria-label="Tools and Software"> <ul class="md-nav__list"> <li class="md-nav__item"> <a href="#bioinformatics-tools-for-mtb-analysis" class="md-nav__link"> <span class="md-ellipsis"> Bioinformatics Tools for MTB Analysis </span> </a> </li> <li class="md-nav__item"> <a href="#genome-assembly-tools" class="md-nav__link"> <span class="md-ellipsis"> Genome Assembly Tools </span> </a> </li> <li class="md-nav__item"> <a href="#advanced-nextflow-features" class="md-nav__link"> <span class="md-ellipsis"> Advanced Nextflow Features </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="#part-1-advanced-pipeline-development-with-real-world-applications" class="md-nav__link"> <span class="md-ellipsis"> Part 1: Advanced Pipeline Development with Real-World Applications </span> </a> <nav class="md-nav" aria-label="Part 1: Advanced Pipeline Development with Real-World Applications"> <ul class="md-nav__list"> <li class="md-nav__item"> <a href="#from-foundation-to-production-building-professional-pipelines" class="md-nav__link"> <span class="md-ellipsis"> From Foundation to Production: Building Professional Pipelines </span> </a> </li> <li class="md-nav__item"> <a href="#the-global-tb-crisis-and-genomics-revolution" class="md-nav__link"> <span class="md-ellipsis"> The Global TB Crisis and Genomics Revolution </span> </a> </li> <li class="md-nav__item"> <a href="#why-tb-genomics-matters" class="md-nav__link"> <span class="md-ellipsis"> Why TB Genomics Matters </span> </a> </li> <li class="md-nav__item"> <a href="#mtb-genomics-workflow-overview" class="md-nav__link"> <span class="md-ellipsis"> MTB Genomics Workflow Overview </span> </a> </li> <li class="md-nav__item"> <a href="#understanding-advanced-pipeline-architecture" class="md-nav__link"> <span class="md-ellipsis"> Understanding Advanced Pipeline Architecture </span> </a> </li> <li class="md-nav__item"> <a href="#exercise-1-building-a-modular-mtb-qc-pipeline-45-minutes" class="md-nav__link"> <span class="md-ellipsis"> Exercise 1: Building a Modular MTB QC Pipeline (45 minutes) </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="#part-2-gitgithub-integration-for-collaborative-development" class="md-nav__link"> <span class="md-ellipsis"> Part 2: Git/GitHub Integration for Collaborative Development </span> </a> <nav class="md-nav" aria-label="Part 2: Git/GitHub Integration for Collaborative Development"> <ul class="md-nav__list"> <li class="md-nav__item"> <a href="#why-version-control-matters-for-bioinformatics" class="md-nav__link"> <span class="md-ellipsis"> Why Version Control Matters for Bioinformatics </span> </a> </li> <li class="md-nav__item"> <a href="#exercise-2-setting-up-gitgithub-for-your-pipeline-30-minutes" class="md-nav__link"> <span class="md-ellipsis"> Exercise 2: Setting Up Git/GitHub for Your Pipeline (30 minutes) </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="#features" class="md-nav__link"> <span class="md-ellipsis"> Features </span> </a> </li> <li class="md-nav__item"> <a href="#requirements" class="md-nav__link"> <span class="md-ellipsis"> Requirements </span> </a> </li> <li class="md-nav__item"> <a href="#input" class="md-nav__link"> <span class="md-ellipsis"> Input </span> </a> </li> <li class="md-nav__item"> <a href="#output" class="md-nav__link"> <span class="md-ellipsis"> Output </span> </a> </li> <li class="md-nav__item"> <a href="#citation" class="md-nav__link"> <span class="md-ellipsis"> Citation </span> </a> </li> <li class="md-nav__item"> <a href="#license" class="md-nav__link"> <span class="md-ellipsis"> License </span> </a> <nav class="md-nav" aria-label="License"> <ul class="md-nav__list"> <li class="md-nav__item"> <a href="#exercise-3-setting-up-automated-testing-with-github-actions-30-minutes" class="md-nav__link"> <span class="md-ellipsis"> Exercise 3: Setting Up Automated Testing with GitHub Actions (30 minutes) </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="#part-3-advanced-nextflow-features-performance-optimization" class="md-nav__link"> <span class="md-ellipsis"> Part 3: Advanced Nextflow Features &amp; Performance Optimization </span> </a> <nav class="md-nav" aria-label="Part 3: Advanced Nextflow Features &amp; Performance Optimization"> <ul class="md-nav__list"> <li class="md-nav__item"> <a href="#understanding-advanced-pipeline-patterns" class="md-nav__link"> <span class="md-ellipsis"> Understanding Advanced Pipeline Patterns </span> </a> </li> <li class="md-nav__item"> <a href="#exercise-4-advanced-pipeline-optimization-45-minutes" class="md-nav__link"> <span class="md-ellipsis"> Exercise 4: Advanced Pipeline Optimization (45 minutes) </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="#part-3-advanced-topics-optimization-deployment" class="md-nav__link"> <span class="md-ellipsis"> Part 3: Advanced Topics - Optimization &amp; Deployment </span> </a> <nav class="md-nav" aria-label="Part 3: Advanced Topics - Optimization &amp; Deployment"> <ul class="md-nav__list"> <li class="md-nav__item"> <a href="#advanced-nextflow-features_1" class="md-nav__link"> <span class="md-ellipsis"> Advanced Nextflow Features </span> </a> <nav class="md-nav" aria-label="Advanced Nextflow Features"> <ul class="md-nav__list"> <li class="md-nav__item"> <a href="#modules-and-subworkflows" class="md-nav__link"> <span class="md-ellipsis"> Modules and Subworkflows </span> </a> </li> <li class="md-nav__item"> <a href="#advanced-channel-operators" class="md-nav__link"> <span class="md-ellipsis"> Advanced Channel Operators </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="#exercise-4-performance-optimization-30-minutes" class="md-nav__link"> <span class="md-ellipsis"> Exercise 4: Performance Optimization (30 minutes) </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="#key-concepts" class="md-nav__link"> <span class="md-ellipsis"> Key Concepts </span> </a> <nav class="md-nav" aria-label="Key Concepts"> <ul class="md-nav__list"> <li class="md-nav__item"> <a href="#nextflow-language-features" class="md-nav__link"> <span class="md-ellipsis"> Nextflow Language Features </span> </a> </li> <li class="md-nav__item"> <a href="#best-practices" class="md-nav__link"> <span class="md-ellipsis"> Best Practices </span> </a> </li> <li class="md-nav__item"> <a href="#configuration-management" class="md-nav__link"> <span class="md-ellipsis"> Configuration Management </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="#pipeline-development-workflow" class="md-nav__link"> <span class="md-ellipsis"> Pipeline Development Workflow </span> </a> <nav class="md-nav" aria-label="Pipeline Development Workflow"> <ul class="md-nav__list"> <li class="md-nav__item"> <a href="#1-planning-phase" class="md-nav__link"> <span class="md-ellipsis"> 1. Planning Phase </span> </a> </li> <li class="md-nav__item"> <a href="#2-development-phase" class="md-nav__link"> <span class="md-ellipsis"> 2. Development Phase </span> </a> </li> <li class="md-nav__item"> <a href="#3-testing-phase" class="md-nav__link"> <span class="md-ellipsis"> 3. Testing Phase </span> </a> </li> <li class="md-nav__item"> <a href="#4-deployment-phase" class="md-nav__link"> <span class="md-ellipsis"> 4. Deployment Phase </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="#assessment-activities" class="md-nav__link"> <span class="md-ellipsis"> Assessment Activities </span> </a> <nav class="md-nav" aria-label="Assessment Activities"> <ul class="md-nav__list"> <li class="md-nav__item"> <a href="#individual-tasks" class="md-nav__link"> <span class="md-ellipsis"> Individual Tasks </span> </a> </li> <li class="md-nav__item"> <a href="#group-exercise" class="md-nav__link"> <span class="md-ellipsis"> Group Exercise </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="#common-challenges" class="md-nav__link"> <span class="md-ellipsis"> Common Challenges </span> </a> <nav class="md-nav" aria-label="Common Challenges"> <ul class="md-nav__list"> <li class="md-nav__item"> <a href="#resource-management" class="md-nav__link"> <span class="md-ellipsis"> Resource Management </span> </a> </li> <li class="md-nav__item"> <a href="#data-staging-issues" class="md-nav__link"> <span class="md-ellipsis"> Data Staging Issues </span> </a> </li> <li class="md-nav__item"> <a href="#container-compatibility" class="md-nav__link"> <span class="md-ellipsis"> Container Compatibility </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="#resources" class="md-nav__link"> <span class="md-ellipsis"> Resources </span> </a> <nav class="md-nav" aria-label="Resources"> <ul class="md-nav__list"> <li class="md-nav__item"> <a href="#documentation" class="md-nav__link"> <span class="md-ellipsis"> Documentation </span> </a> </li> <li class="md-nav__item"> <a href="#training-materials" class="md-nav__link"> <span class="md-ellipsis"> Training Materials </span> </a> </li> <li class="md-nav__item"> <a href="#development-tools" class="md-nav__link"> <span class="md-ellipsis"> Development Tools </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="#looking-ahead" class="md-nav__link"> <span class="md-ellipsis"> Looking Ahead </span> </a> <nav class="md-nav" aria-label="Looking Ahead"> <ul class="md-nav__list"> <li class="md-nav__item"> <a href="#next-steps-for-your-research" class="md-nav__link"> <span class="md-ellipsis"> Next Steps for Your Research </span> </a> </li> <li class="md-nav__item"> <a href="#real-world-applications" class="md-nav__link"> <span class="md-ellipsis"> Real-world Applications </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="#day-7-completion-from-beginner-to-pipeline-developer" class="md-nav__link"> <span class="md-ellipsis"> Day 7 Completion: From Beginner to Pipeline Developer </span> </a> <nav class="md-nav" aria-label="Day 7 Completion: From Beginner to Pipeline Developer"> <ul class="md-nav__list"> <li class="md-nav__item"> <a href="#your-next-steps" class="md-nav__link"> <span class="md-ellipsis"> Your Next Steps </span> </a> </li> <li class="md-nav__item"> <a href="#resources-for-continued-growth" class="md-nav__link"> <span class="md-ellipsis"> Resources for Continued Growth </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="../day8/" class="md-nav__link"> <span class="md-ellipsis"> Day 8 - Comparative Genomics </span> </a> </li> <li class="md-nav__item"> <a href="../day9/" class="md-nav__link"> <span class="md-ellipsis"> Day 9 - Bring your own data </span> </a> </li> <li class="md-nav__item"> <a href="../day10/" class="md-nav__link"> <span class="md-ellipsis"> Day 10 - Wrap-up session </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href="../../datasets/" class="md-nav__link"> <span class="md-ellipsis"> Resources </span> <span class="md-nav__icon md-icon"></span> </a> </li> </ul> </nav> </div> </div> </div> <div class="md-content" data-md-component="content"> <article class="md-content__inner md-typeset"> <a href="https://github.com/CIDRI-Africa/microbial-genomics-training/edit/master/docs/modules/day7/index.md" title="Edit this page" class="md-content__button md-icon" rel="edit"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"></path></svg> </a> <a href="https://github.com/CIDRI-Africa/microbial-genomics-training/raw/master/docs/modules/day7/index.md" title="View source of this page" class="md-content__button md-icon"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.2 8.2 0 0 1-1.23-2"></path></svg> </a> <h1 id="day-7-advanced-nextflow-version-control-with-github">Day 7: Advanced Nextflow &amp; Version Control with GitHub<a class="headerlink" href="#day-7-advanced-nextflow-version-control-with-github" title="Permanent link">¶</a></h1> <p><strong>Date</strong>: September 9, 2025 <strong>Duration</strong>: 09:00-13:00 CAT <strong>Focus</strong>: Advanced pipeline development, Git/GitHub integration, and production deployment</p> <h2 id="learning-philosophy-build-it-optimize-it-share-it-deploy-it">Learning Philosophy: Build it → Optimize it → Share it → Deploy it<a class="headerlink" href="#learning-philosophy-build-it-optimize-it-share-it-deploy-it" title="Permanent link">¶</a></h2> <p>Building on Day 6's foundation, Day 7 follows an advanced learning progression:</p> <ul> <li><strong>Build it</strong>: Create complex, real-world genomics pipelines</li> <li><strong>Optimize it</strong>: Implement performance tuning and best practices</li> <li><strong>Share it</strong>: Use Git/GitHub for collaboration and version control</li> <li><strong>Deploy it</strong>: Scale pipelines from laptop to HPC to cloud</li> </ul> <p>This approach ensures you develop not just technical skills, but professional workflows essential for modern bioinformatics.</p> <h2 id="overview">Overview<a class="headerlink" href="#overview" title="Permanent link">¶</a></h2> <p>Day 7 transforms you from a Nextflow beginner into a pipeline developer ready for real-world bioinformatics challenges. Building on Day 6's solid foundation, you'll master advanced concepts, professional development practices, and deployment strategies that separate hobbyist scripts from production-ready pipelines.</p> <h3 id="the-big-picture-simple-vs-advanced-pipeline-development">The Big Picture: Simple vs Advanced Pipeline Development<a class="headerlink" href="#the-big-picture-simple-vs-advanced-pipeline-development" title="Permanent link">¶</a></h3> <p>To understand the journey from Day 6 to Day 7, let's visualize the evolution:</p> <h4 id="simple-pipeline-approach-day-6-level">Simple Pipeline Approach (Day 6 Level)<a class="headerlink" href="#simple-pipeline-approach-day-6-level" title="Permanent link">¶</a></h4> <pre class="mermaid"><code>graph LR
    A[Single Script] --&gt; B[Basic Processes] --&gt; C[Local Execution] --&gt; D[Manual Results]

    style A fill:#ffebee
    style B fill:#ffebee
    style C fill:#ffebee
    style D fill:#ffebee</code></pre> <h4 id="advanced-pipeline-approach-day-7-level">Advanced Pipeline Approach (Day 7 Level)<a class="headerlink" href="#advanced-pipeline-approach-day-7-level" title="Permanent link">¶</a></h4> <pre class="mermaid"><code>graph LR
    A[Modular Design] --&gt; B[Advanced Features] --&gt; C[Multi-Platform] --&gt; D[Automated Sharing]
    A --&gt; E[Version Control]
    B --&gt; F[Performance Tuning]
    C --&gt; G[Cloud Deployment]
    D --&gt; H[Community Impact]

    style A fill:#e8f5e8
    style B fill:#e8f5e8
    style C fill:#e8f5e8
    style D fill:#e8f5e8
    style E fill:#e8f5e8
    style F fill:#e8f5e8
    style G fill:#e8f5e8
    style H fill:#e8f5e8</code></pre> <div id="pipeline-evolution" style="background: #f5f5f5; padding: 20px; border-radius: 8px; margin: 20px 0;"> <h4>🚀 Pipeline Development Evolution</h4> <p>See how your skills will evolve from Day 6 to Day 7:</p> <div style="display: flex; gap: 20px; margin: 20px 0;"> <div style="flex: 1; background: #ffebee; padding: 15px; border-radius: 8px; border-left: 4px solid #f44336;"> <h5>📝 Day 6: Foundation Level</h5> <ul style="margin: 10px 0; padding-left: 20px;"> <li>Single-file scripts</li> <li>Basic processes and channels</li> <li>Local execution only</li> <li>Manual result management</li> <li>Individual development</li> </ul> <div style="text-align: center; margin-top: 15px; font-weight: bold; color: #d32f2f;"> Good for learning and simple tasks </div> </div> <div style="flex: 1; background: #e8f5e8; padding: 15px; border-radius: 8px; border-left: 4px solid #4caf50;"> <h5>⚡ Day 7: Professional Level</h5> <ul style="margin: 10px 0; padding-left: 20px;"> <li>Modular, reusable components</li> <li>Advanced Nextflow features</li> <li>Multi-platform deployment</li> <li>Automated CI/CD pipelines</li> <li>Collaborative development</li> </ul> <div style="text-align: center; margin-top: 15px; font-weight: bold; color: #2e7d32;"> Ready for production and research </div> </div> </div> <div style="text-align: center; margin-top: 20px; padding: 15px; background: #e3f2fd; border-radius: 5px;"> <strong>🎯 Today's Goal:</strong> Transform your Day 6 foundation into professional-grade pipeline development skills </div> </div> <h2 id="learning-objectives">Learning Objectives<a class="headerlink" href="#learning-objectives" title="Permanent link">¶</a></h2> <div id="learning-objectives" style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin: 20px 0;"> <h4>🎯 Interactive Learning Objectives Tracker</h4> <p>Track your progress through today's advanced concepts:</p> <div style="margin: 15px 0;"> <label style="display: flex; align-items: center; margin: 8px 0; padding: 10px; background: white; border-radius: 5px; border-left: 4px solid #2196f3;"> <input type="checkbox" class="objective-checkbox" style="margin-right: 10px;"> <div> <strong>Advanced Pipeline Architecture</strong> <div style="font-size: 0.9em; color: #666; margin-top: 5px;"> Master modules, subworkflows, and complex data flow patterns </div> </div> </label> <label style="display: flex; align-items: center; margin: 8px 0; padding: 10px; background: white; border-radius: 5px; border-left: 4px solid #9c27b0;"> <input type="checkbox" class="objective-checkbox" style="margin-right: 10px;"> <div> <strong>Git/GitHub Integration</strong> <div style="font-size: 0.9em; color: #666; margin-top: 5px;"> Version control, collaboration, and automated testing workflows </div> </div> </label> <label style="display: flex; align-items: center; margin: 8px 0; padding: 10px; background: white; border-radius: 5px; border-left: 4px solid #ff9800;"> <input type="checkbox" class="objective-checkbox" style="margin-right: 10px;"> <div> <strong>Performance Optimization</strong> <div style="font-size: 0.9em; color: #666; margin-top: 5px;"> Resource management, caching, and scalability strategies </div> </div> </label> <label style="display: flex; align-items: center; margin: 8px 0; padding: 10px; background: white; border-radius: 5px; border-left: 4px solid #4caf50;"> <input type="checkbox" class="objective-checkbox" style="margin-right: 10px;"> <div> <strong>Multi-Platform Deployment</strong> <div style="font-size: 0.9em; color: #666; margin-top: 5px;"> Local, HPC, and cloud execution with configuration profiles </div> </div> </label> <label style="display: flex; align-items: center; margin: 8px 0; padding: 10px; background: white; border-radius: 5px; border-left: 4px solid #f44336;"> <input type="checkbox" class="objective-checkbox" style="margin-right: 10px;"> <div> <strong>Production-Ready Practices</strong> <div style="font-size: 0.9em; color: #666; margin-top: 5px;"> Error handling, testing, documentation, and community sharing </div> </div> </label> <label style="display: flex; align-items: center; margin: 8px 0; padding: 10px; background: white; border-radius: 5px; border-left: 4px solid #607d8b;"> <input type="checkbox" class="objective-checkbox" style="margin-right: 10px;"> <div> <strong>Real-World Applications</strong> <div style="font-size: 0.9em; color: #666; margin-top: 5px;"> MTB analysis, genome assembly, and clinical genomics workflows </div> </div> </label> </div> <div id="objectives-progress" style="margin-top: 20px;"> <div style="background: #e0e0e0; border-radius: 10px; height: 25px; overflow: hidden;"> <div id="objectives-progress-bar" style="background: linear-gradient(90deg, #4caf50, #8bc34a); height: 100%; width: 0%; transition: width 0.3s ease; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold; font-size: 0.9em;"></div> </div> <p id="objectives-progress-text" style="text-align: center; margin-top: 10px; font-weight: bold;">Learning Progress: 0/6 objectives mastered</p> </div> <div id="objectives-complete" style="display: none; background: #d4edda; color: #155724; padding: 20px; border-radius: 5px; margin-top: 15px; text-align: center;"> 🎉 <strong>Congratulations!</strong> You've mastered all advanced Nextflow concepts! <br><br> <strong>You're now ready to:</strong> <ul style="text-align: left; margin-top: 10px;"> <li>Develop production-ready bioinformatics pipelines</li> <li>Lead collaborative pipeline development projects</li> <li>Deploy pipelines at institutional scale</li> <li>Contribute to the global bioinformatics community</li> </ul> </div> </div> <script>
function updateObjectivesProgress() {
    const checkboxes = document.querySelectorAll('.objective-checkbox');
    const checked = document.querySelectorAll('.objective-checkbox:checked').length;
    const total = checkboxes.length;
    const percentage = (checked / total) * 100;

    document.getElementById('objectives-progress-bar').style.width = percentage + '%';
    document.getElementById('objectives-progress-bar').textContent = percentage > 0 ? Math.round(percentage) + '%' : '';
    document.getElementById('objectives-progress-text').textContent = `Learning Progress: ${checked}/${total} objectives mastered`;

    if (checked === total) {
        document.getElementById('objectives-complete').style.display = 'block';
    } else {
        document.getElementById('objectives-complete').style.display = 'none';
    }
}

document.querySelectorAll('.objective-checkbox').forEach(checkbox => {
    checkbox.addEventListener('change', updateObjectivesProgress);
});
</script> <h2 id="schedule">Schedule<a class="headerlink" href="#schedule" title="Permanent link">¶</a></h2> <table> <thead> <tr> <th>Time (CAT)</th> <th>Topic</th> <th>Duration</th> <th>Trainer</th> </tr> </thead> <tbody> <tr> <td><strong>09:00</strong></td> <td><em>Applied Genomics: MTB Analysis Pipeline</em></td> <td>75 min</td> <td>Mamana Mbiyavanga</td> </tr> <tr> <td><strong>10:15</strong></td> <td><em>Genome Assembly Workflows</em></td> <td>75 min</td> <td>Mamana Mbiyavanga</td> </tr> <tr> <td><strong>11:30</strong></td> <td><strong>Break</strong></td> <td>15 min</td> <td></td> </tr> <tr> <td><strong>11:45</strong></td> <td><em>Advanced Topics: Optimization &amp; Deployment</em></td> <td>75 min</td> <td>Mamana Mbiyavanga</td> </tr> </tbody> </table> <h2 id="key-topics">Key Topics<a class="headerlink" href="#key-topics" title="Permanent link">¶</a></h2> <h3 id="1-applied-genomics-mtb-analysis-pipeline-75-minutes">1. Applied Genomics: MTB Analysis Pipeline (75 minutes)<a class="headerlink" href="#1-applied-genomics-mtb-analysis-pipeline-75-minutes" title="Permanent link">¶</a></h3> <ul> <li>Clinical TB genomics workflow requirements</li> <li>Quality control and read preprocessing</li> <li>Reference-based variant calling pipeline</li> <li>Drug resistance prediction and lineage typing</li> <li>Phylogenetic analysis and transmission clustering</li> <li>Clinical reporting and interpretation</li> </ul> <h3 id="2-genome-assembly-workflows-75-minutes">2. Genome Assembly Workflows (75 minutes)<a class="headerlink" href="#2-genome-assembly-workflows-75-minutes" title="Permanent link">¶</a></h3> <ul> <li>De novo assembly pipeline development</li> <li>Assembly quality assessment and validation</li> <li>Genome annotation and functional analysis</li> <li>Comparative genomics approaches</li> <li>Multi-sample assembly processing</li> <li>Integration with downstream analyses</li> </ul> <h3 id="3-advanced-topics-optimization-deployment-75-minutes">3. Advanced Topics: Optimization &amp; Deployment (75 minutes)<a class="headerlink" href="#3-advanced-topics-optimization-deployment-75-minutes" title="Permanent link">¶</a></h3> <ul> <li>Advanced Nextflow features and modules</li> <li>Performance optimization and resource management</li> <li>Testing frameworks and continuous integration</li> <li>Deployment strategies (local, HPC, cloud)</li> <li>Production deployment and monitoring</li> <li>Best practices for collaborative development</li> </ul> <h2 id="tools-and-software">Tools and Software<a class="headerlink" href="#tools-and-software" title="Permanent link">¶</a></h2> <h3 id="bioinformatics-tools-for-mtb-analysis">Bioinformatics Tools for MTB Analysis<a class="headerlink" href="#bioinformatics-tools-for-mtb-analysis" title="Permanent link">¶</a></h3> <ul> <li><strong>BWA</strong> - Read alignment to reference genome</li> <li><strong>SAMtools/BCFtools</strong> - SAM/BAM manipulation and variant calling</li> <li><strong>GATK</strong> - Genome Analysis Toolkit for variant calling</li> <li><strong>FastQC/MultiQC</strong> - Quality control and reporting</li> <li><strong>Trimmomatic</strong> - Read trimming and filtering</li> <li><strong>TB-Profiler</strong> - Drug resistance prediction</li> <li><strong>SNP-sites</strong> - SNP extraction from alignments</li> <li><strong>IQ-TREE</strong> - Phylogenetic tree construction</li> </ul> <h3 id="genome-assembly-tools">Genome Assembly Tools<a class="headerlink" href="#genome-assembly-tools" title="Permanent link">¶</a></h3> <ul> <li><strong>SPAdes</strong> - De novo genome assembly</li> <li><strong>QUAST</strong> - Assembly quality assessment</li> <li><strong>Prokka</strong> - Genome annotation</li> <li><strong>BUSCO</strong> - Assembly completeness assessment</li> <li><strong>Bandage</strong> - Assembly graph visualization</li> </ul> <h3 id="advanced-nextflow-features">Advanced Nextflow Features<a class="headerlink" href="#advanced-nextflow-features" title="Permanent link">¶</a></h3> <ul> <li><strong>nf-core tools</strong> - Pipeline development framework</li> <li><strong>nf-test</strong> - Testing framework</li> <li><strong>Nextflow Tower</strong> - Pipeline monitoring</li> <li><strong>Docker/Singularity</strong> - Container technologies</li> </ul> <h2 id="part-1-advanced-pipeline-development-with-real-world-applications">Part 1: Advanced Pipeline Development with Real-World Applications<a class="headerlink" href="#part-1-advanced-pipeline-development-with-real-world-applications" title="Permanent link">¶</a></h2> <h3 id="from-foundation-to-production-building-professional-pipelines">From Foundation to Production: Building Professional Pipelines<a class="headerlink" href="#from-foundation-to-production-building-professional-pipelines" title="Permanent link">¶</a></h3> <p>Now that you've mastered Nextflow basics, it's time to build pipelines that can handle real-world challenges. We'll use MTB (Mycobacterium tuberculosis) genomics as our case study - a perfect example of how advanced pipeline development can directly impact human health.</p> <h3 id="the-global-tb-crisis-and-genomics-revolution">The Global TB Crisis and Genomics Revolution<a class="headerlink" href="#the-global-tb-crisis-and-genomics-revolution" title="Permanent link">¶</a></h3> <p>Tuberculosis kills more people than any other infectious disease caused by a single agent. In 2023, 10.6 million people fell ill with TB and 1.3 million died. Drug-resistant TB threatens to reverse decades of progress. This section equips you with cutting-edge genomic tools to combat this ancient disease using modern technology.</p> <div id="tb-impact-calculator" style="background: #f5f5f5; padding: 20px; border-radius: 8px; margin: 20px 0;"> <h4>🦠 TB Genomics Impact Calculator</h4> <p>See how genomic analysis can accelerate TB diagnosis and treatment:</p> <div style="margin: 10px 0;"> <label for="samples-per-day">Samples processed per day:</label> <input type="range" id="samples-per-day" min="1" max="100" value="20" style="width: 200px;"> <span id="samples-display">20</span> </div> <div style="display: flex; justify-content: space-between; margin-top: 20px;"> <div style="background: #ffebee; padding: 15px; border-radius: 5px; width: 45%;"> <h5>🐌 Traditional Culture Method</h5> <p><strong>Time to result: <span id="traditional-days">6-8 weeks</span></strong></p> <p><strong>Daily capacity: <span id="traditional-capacity">5-10 samples</span></strong></p> <p>Limited drug resistance testing</p> </div> <div style="background: #e8f5e8; padding: 15px; border-radius: 5px; width: 45%;"> <h5>⚡ Genomic Analysis</h5> <p><strong>Time to result: <span id="genomic-days">1-2 days</span></strong></p> <p><strong>Daily capacity: <span id="genomic-capacity">50-100 samples</span></strong></p> <p>Complete resistance profiling</p> </div> </div> <div style="text-align: center; margin-top: 15px; font-size: 1.2em; font-weight: bold; color: #2e7d32;"> Lives potentially saved per year: <span id="lives-saved">2,400</span> </div> <div style="margin-top: 15px; padding: 10px; background: #e3f2fd; border-radius: 5px; font-size: 0.9em;"> <strong>💡 Impact:</strong> Faster diagnosis means earlier treatment, reduced transmission, and better outcomes. Your pipeline development skills can literally save lives! </div> </div> <script>
function updateTBCalculator() {
    const samplesPerDay = document.getElementById('samples-per-day').value;
    document.getElementById('samples-display').textContent = samplesPerDay;

    // Calculate impact
    const traditionalCapacity = Math.min(samplesPerDay, 10);
    const genomicCapacity = samplesPerDay;
    const additionalSamples = genomicCapacity - traditionalCapacity;
    const timesSaved = additionalSamples * 30; // 30 days faster on average
    const livesSaved = Math.round(additionalSamples * 365 * 0.1); // Assume 10% mortality reduction

    document.getElementById('traditional-capacity').textContent = traditionalCapacity + ' samples';
    document.getElementById('genomic-capacity').textContent = genomicCapacity + ' samples';
    document.getElementById('lives-saved').textContent = livesSaved.toLocaleString();
}

document.getElementById('samples-per-day').addEventListener('input', updateTBCalculator);
updateTBCalculator();
</script> <h3 id="why-tb-genomics-matters">Why TB Genomics Matters<a class="headerlink" href="#why-tb-genomics-matters" title="Permanent link">¶</a></h3> <p><strong>Clinical Impact:</strong></p> <ul> <li>Reduce diagnosis time from weeks to days</li> <li>Detect drug resistance before treatment failure</li> <li>Guide personalized treatment regimens</li> <li>Identify extensively drug-resistant (XDR) strains early</li> </ul> <p><strong>Public Health Applications:</strong></p> <ul> <li>Track transmission chains in real-time</li> <li>Identify super-spreaders and hotspots</li> <li>Monitor emergence of new resistance mutations</li> <li>Support contact tracing with genomic evidence</li> </ul> <h3 id="mtb-genomics-workflow-overview">MTB Genomics Workflow Overview<a class="headerlink" href="#mtb-genomics-workflow-overview" title="Permanent link">¶</a></h3> <pre class="mermaid"><code>graph TD
    A[Raw FASTQ reads] --&gt; B[Quality Control]
    B --&gt; C[Read Trimming]
    C --&gt; D[Reference Alignment]
    D --&gt; E[Variant Calling]
    E --&gt; F[Drug Resistance Prediction]
    E --&gt; G[Lineage Typing]
    E --&gt; H[Phylogenetic Analysis]
    F --&gt; I[Clinical Report]
    G --&gt; I
    H --&gt; I</code></pre> <h3 id="understanding-advanced-pipeline-architecture">Understanding Advanced Pipeline Architecture<a class="headerlink" href="#understanding-advanced-pipeline-architecture" title="Permanent link">¶</a></h3> <p>Before diving into exercises, let's understand how professional pipelines differ from basic scripts:</p> <div id="architecture-comparison" style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin: 20px 0;"> <h4>🏗️ Pipeline Architecture Evolution</h4> <p>Click to explore different architectural approaches:</p> <div style="margin: 15px 0;"> <button class="arch-btn" data-arch="basic" style="display: block; width: 100%; padding: 12px; margin: 8px 0; background: #ffebee; border: 1px solid #f44336; border-radius: 5px; text-align: left; cursor: pointer;"> 📝 Basic Script (Day 6 Level) </button> <button class="arch-btn" data-arch="modular" style="display: block; width: 100%; padding: 12px; margin: 8px 0; background: #e3f2fd; border: 1px solid #2196f3; border-radius: 5px; text-align: left; cursor: pointer;"> 🧩 Modular Pipeline (Day 7 Level) </button> <button class="arch-btn" data-arch="production" style="display: block; width: 100%; padding: 12px; margin: 8px 0; background: #e8f5e8; border: 1px solid #4caf50; border-radius: 5px; text-align: left; cursor: pointer;"> 🚀 Production Pipeline (Advanced) </button> </div> <div id="arch-display" style="margin-top: 20px; padding: 15px; background: white; border-radius: 5px; display: none;"> <div id="arch-content"></div> </div> </div> <script>
const architectures = {
    basic: {
        title: "📝 Basic Script Architecture",
        content: `
<strong>Structure:</strong>
<pre style="background: #f5f5f5; padding: 10px; border-radius: 3px;">
single_script.nf
├── All processes in one file
├── Hardcoded parameters
├── No error handling
└── Manual execution only
</pre>

<strong>Characteristics:</strong>
<ul>
<li>✅ Simple to understand</li>
<li>✅ Quick to write</li>
<li>❌ Hard to maintain</li>
<li>❌ Not reusable</li>
<li>❌ No version control</li>
<li>❌ Limited scalability</li>
</ul>

<strong>Best for:</strong> Learning, prototyping, one-off analyses
        `
    },
    modular: {
        title: "🧩 Modular Pipeline Architecture",
        content: `
<strong>Structure:</strong>
<pre style="background: #f5f5f5; padding: 10px; border-radius: 3px;">
pipeline/
├── main.nf                 # Main workflow
├── modules/
│   ├── fastqc.nf          # Reusable modules
│   ├── trimmomatic.nf
│   └── bwa.nf
├── subworkflows/
│   └── qc_workflow.nf     # Combined processes
├── nextflow.config        # Configuration
└── README.md              # Documentation
</pre>

<strong>Characteristics:</strong>
<ul>
<li>✅ Reusable components</li>
<li>✅ Clear organization</li>
<li>✅ Configurable parameters</li>
<li>✅ Basic error handling</li>
<li>✅ Version controlled</li>
<li>✅ Team collaboration</li>
</ul>

<strong>Best for:</strong> Research projects, team development, reusable workflows
        `
    },
    production: {
        title: "🚀 Production Pipeline Architecture",
        content: `
<strong>Structure:</strong>
<pre style="background: #f5f5f5; padding: 10px; border-radius: 3px;">
pipeline/
├── main.nf
├── modules/
├── subworkflows/
├── conf/
│   ├── base.config
│   ├── modules.config
│   └── test.config
├── tests/
│   ├── test_data/
│   └── test_main.nf
├── .github/
│   └── workflows/
│       └── ci.yml         # Automated testing
├── docs/
├── CHANGELOG.md
└── LICENSE
</pre>

<strong>Characteristics:</strong>
<ul>
<li>✅ Comprehensive testing</li>
<li>✅ Automated CI/CD</li>
<li>✅ Multi-platform deployment</li>
<li>✅ Robust error handling</li>
<li>✅ Complete documentation</li>
<li>✅ Community standards</li>
</ul>

<strong>Best for:</strong> Clinical applications, published methods, community tools
        `
    }
};

document.querySelectorAll('.arch-btn').forEach(btn => {
    btn.addEventListener('click', function() {
        const arch = this.dataset.arch;
        const architecture = architectures[arch];

        // Reset all buttons
        document.querySelectorAll('.arch-btn').forEach(b => {
            b.style.opacity = '0.7';
        });

        // Highlight selected button
        this.style.opacity = '1';

        // Show architecture
        document.getElementById('arch-content').innerHTML =
            '<h5>' + architecture.title + '</5>' + architecture.content;
        document.getElementById('arch-display').style.display = 'block';
    });
});
</script> <h3 id="exercise-1-building-a-modular-mtb-qc-pipeline-45-minutes">Exercise 1: Building a Modular MTB QC Pipeline (45 minutes)<a class="headerlink" href="#exercise-1-building-a-modular-mtb-qc-pipeline-45-minutes" title="Permanent link">¶</a></h3> <p><strong>Objective</strong>: Transform a basic script into a modular, professional pipeline</p> <p><strong>Setup: Create the project structure</strong></p> <div class="language-bash highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>mkdir<span class="w"> </span>mtb-pipeline
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="nb">cd</span><span class="w"> </span>mtb-pipeline
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>mkdir<span class="w"> </span>modules<span class="w"> </span>subworkflows<span class="w"> </span>conf
</span></code></pre></div> <details class="success"> <summary>Expected directory structure</summary> <div class="language-text highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>mtb-pipeline/
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>├── modules/
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>├── subworkflows/
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>├── conf/
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>├── main.nf
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>└── nextflow.config
</span></code></pre></div> </details> <p><strong>Step 1: Create reusable modules</strong></p> <p>Create <code>modules/fastqc.nf</code>:</p> <div class="language-text highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>process FASTQC {
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>    tag "$meta.id"
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>    label 'process_medium'
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a>    container 'biocontainers/fastqc:v0.11.9_cv8'
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a>
</span><span id="__span-2-6"><a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a>    input:
</span><span id="__span-2-7"><a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a>    tuple val(meta), path(reads)
</span><span id="__span-2-8"><a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a>
</span><span id="__span-2-9"><a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a>    output:
</span><span id="__span-2-10"><a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a>    tuple val(meta), path("*.html"), emit: html
</span><span id="__span-2-11"><a id="__codelineno-2-11" name="__codelineno-2-11" href="#__codelineno-2-11"></a>    tuple val(meta), path("*.zip") , emit: zip
</span><span id="__span-2-12"><a id="__codelineno-2-12" name="__codelineno-2-12" href="#__codelineno-2-12"></a>    path "versions.yml"           , emit: versions
</span><span id="__span-2-13"><a id="__codelineno-2-13" name="__codelineno-2-13" href="#__codelineno-2-13"></a>
</span><span id="__span-2-14"><a id="__codelineno-2-14" name="__codelineno-2-14" href="#__codelineno-2-14"></a>    when:
</span><span id="__span-2-15"><a id="__codelineno-2-15" name="__codelineno-2-15" href="#__codelineno-2-15"></a>    task.ext.when == null || task.ext.when
</span><span id="__span-2-16"><a id="__codelineno-2-16" name="__codelineno-2-16" href="#__codelineno-2-16"></a>
</span><span id="__span-2-17"><a id="__codelineno-2-17" name="__codelineno-2-17" href="#__codelineno-2-17"></a>    script:
</span><span id="__span-2-18"><a id="__codelineno-2-18" name="__codelineno-2-18" href="#__codelineno-2-18"></a>    def args = task.ext.args ?: ''
</span><span id="__span-2-19"><a id="__codelineno-2-19" name="__codelineno-2-19" href="#__codelineno-2-19"></a>    def prefix = task.ext.prefix ?: "${meta.id}"
</span><span id="__span-2-20"><a id="__codelineno-2-20" name="__codelineno-2-20" href="#__codelineno-2-20"></a>    """
</span><span id="__span-2-21"><a id="__codelineno-2-21" name="__codelineno-2-21" href="#__codelineno-2-21"></a>    fastqc \\
</span><span id="__span-2-22"><a id="__codelineno-2-22" name="__codelineno-2-22" href="#__codelineno-2-22"></a>        $args \\
</span><span id="__span-2-23"><a id="__codelineno-2-23" name="__codelineno-2-23" href="#__codelineno-2-23"></a>        --threads $task.cpus \\
</span><span id="__span-2-24"><a id="__codelineno-2-24" name="__codelineno-2-24" href="#__codelineno-2-24"></a>        $reads
</span><span id="__span-2-25"><a id="__codelineno-2-25" name="__codelineno-2-25" href="#__codelineno-2-25"></a>
</span><span id="__span-2-26"><a id="__codelineno-2-26" name="__codelineno-2-26" href="#__codelineno-2-26"></a>    cat &lt;&lt;-END_VERSIONS &gt; versions.yml
</span><span id="__span-2-27"><a id="__codelineno-2-27" name="__codelineno-2-27" href="#__codelineno-2-27"></a>    "${task.process}":
</span><span id="__span-2-28"><a id="__codelineno-2-28" name="__codelineno-2-28" href="#__codelineno-2-28"></a>        fastqc: \$(fastqc --version | sed -e "s/FastQC v//g")
</span><span id="__span-2-29"><a id="__codelineno-2-29" name="__codelineno-2-29" href="#__codelineno-2-29"></a>    END_VERSIONS
</span><span id="__span-2-30"><a id="__codelineno-2-30" name="__codelineno-2-30" href="#__codelineno-2-30"></a>    """
</span><span id="__span-2-31"><a id="__codelineno-2-31" name="__codelineno-2-31" href="#__codelineno-2-31"></a>}
</span></code></pre></div> <p><strong>Step 2: Create a subworkflow</strong></p> <p>Create <code>subworkflows/qc_workflow.nf</code>:</p> <div class="language-text highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>include { FASTQC } from '../modules/fastqc'
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>include { TRIMMOMATIC } from '../modules/trimmomatic'
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>include { MULTIQC } from '../modules/multiqc'
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a>
</span><span id="__span-3-5"><a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a>workflow QC_WORKFLOW {
</span><span id="__span-3-6"><a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a>    take:
</span><span id="__span-3-7"><a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a>    reads    // channel: [ val(meta), [ reads ] ]
</span><span id="__span-3-8"><a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a>
</span><span id="__span-3-9"><a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a>    main:
</span><span id="__span-3-10"><a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a>    ch_versions = Channel.empty()
</span><span id="__span-3-11"><a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a>
</span><span id="__span-3-12"><a id="__codelineno-3-12" name="__codelineno-3-12" href="#__codelineno-3-12"></a>    // Pre-trimming QC
</span><span id="__span-3-13"><a id="__codelineno-3-13" name="__codelineno-3-13" href="#__codelineno-3-13"></a>    FASTQC(reads)
</span><span id="__span-3-14"><a id="__codelineno-3-14" name="__codelineno-3-14" href="#__codelineno-3-14"></a>    ch_versions = ch_versions.mix(FASTQC.out.versions)
</span><span id="__span-3-15"><a id="__codelineno-3-15" name="__codelineno-3-15" href="#__codelineno-3-15"></a>
</span><span id="__span-3-16"><a id="__codelineno-3-16" name="__codelineno-3-16" href="#__codelineno-3-16"></a>    // Read trimming
</span><span id="__span-3-17"><a id="__codelineno-3-17" name="__codelineno-3-17" href="#__codelineno-3-17"></a>    TRIMMOMATIC(reads)
</span><span id="__span-3-18"><a id="__codelineno-3-18" name="__codelineno-3-18" href="#__codelineno-3-18"></a>    ch_versions = ch_versions.mix(TRIMMOMATIC.out.versions)
</span><span id="__span-3-19"><a id="__codelineno-3-19" name="__codelineno-3-19" href="#__codelineno-3-19"></a>
</span><span id="__span-3-20"><a id="__codelineno-3-20" name="__codelineno-3-20" href="#__codelineno-3-20"></a>    // Post-trimming QC
</span><span id="__span-3-21"><a id="__codelineno-3-21" name="__codelineno-3-21" href="#__codelineno-3-21"></a>    FASTQC_TRIMMED = FASTQC
</span><span id="__span-3-22"><a id="__codelineno-3-22" name="__codelineno-3-22" href="#__codelineno-3-22"></a>    FASTQC_TRIMMED(TRIMMOMATIC.out.trimmed)
</span><span id="__span-3-23"><a id="__codelineno-3-23" name="__codelineno-3-23" href="#__codelineno-3-23"></a>
</span><span id="__span-3-24"><a id="__codelineno-3-24" name="__codelineno-3-24" href="#__codelineno-3-24"></a>    // Aggregate QC reports
</span><span id="__span-3-25"><a id="__codelineno-3-25" name="__codelineno-3-25" href="#__codelineno-3-25"></a>    qc_files = FASTQC.out.zip
</span><span id="__span-3-26"><a id="__codelineno-3-26" name="__codelineno-3-26" href="#__codelineno-3-26"></a>        .mix(FASTQC_TRIMMED.out.zip)
</span><span id="__span-3-27"><a id="__codelineno-3-27" name="__codelineno-3-27" href="#__codelineno-3-27"></a>        .map { meta, files -&gt; files }
</span><span id="__span-3-28"><a id="__codelineno-3-28" name="__codelineno-3-28" href="#__codelineno-3-28"></a>        .collect()
</span><span id="__span-3-29"><a id="__codelineno-3-29" name="__codelineno-3-29" href="#__codelineno-3-29"></a>
</span><span id="__span-3-30"><a id="__codelineno-3-30" name="__codelineno-3-30" href="#__codelineno-3-30"></a>    MULTIQC(qc_files)
</span><span id="__span-3-31"><a id="__codelineno-3-31" name="__codelineno-3-31" href="#__codelineno-3-31"></a>    ch_versions = ch_versions.mix(MULTIQC.out.versions)
</span><span id="__span-3-32"><a id="__codelineno-3-32" name="__codelineno-3-32" href="#__codelineno-3-32"></a>
</span><span id="__span-3-33"><a id="__codelineno-3-33" name="__codelineno-3-33" href="#__codelineno-3-33"></a>    emit:
</span><span id="__span-3-34"><a id="__codelineno-3-34" name="__codelineno-3-34" href="#__codelineno-3-34"></a>    trimmed_reads = TRIMMOMATIC.out.trimmed
</span><span id="__span-3-35"><a id="__codelineno-3-35" name="__codelineno-3-35" href="#__codelineno-3-35"></a>    fastqc_raw    = FASTQC.out.zip
</span><span id="__span-3-36"><a id="__codelineno-3-36" name="__codelineno-3-36" href="#__codelineno-3-36"></a>    fastqc_trim   = FASTQC_TRIMMED.out.zip
</span><span id="__span-3-37"><a id="__codelineno-3-37" name="__codelineno-3-37" href="#__codelineno-3-37"></a>    multiqc       = MULTIQC.out.report
</span><span id="__span-3-38"><a id="__codelineno-3-38" name="__codelineno-3-38" href="#__codelineno-3-38"></a>    versions      = ch_versions
</span><span id="__span-3-39"><a id="__codelineno-3-39" name="__codelineno-3-39" href="#__codelineno-3-39"></a>}
</span></code></pre></div> <p><strong>Step 3: Create the main workflow</strong></p> <p>Create <code>main.nf</code>:</p> <div class="language-text highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>#!/usr/bin/env nextflow
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>nextflow.enable.dsl = 2
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a>
</span><span id="__span-4-5"><a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a>// Include subworkflows
</span><span id="__span-4-6"><a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a>include { QC_WORKFLOW } from './subworkflows/qc_workflow'
</span><span id="__span-4-7"><a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a>
</span><span id="__span-4-8"><a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a>// Main workflow
</span><span id="__span-4-9"><a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a>workflow {
</span><span id="__span-4-10"><a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a>    // Input validation
</span><span id="__span-4-11"><a id="__codelineno-4-11" name="__codelineno-4-11" href="#__codelineno-4-11"></a>    if (!params.input) {
</span><span id="__span-4-12"><a id="__codelineno-4-12" name="__codelineno-4-12" href="#__codelineno-4-12"></a>        error "Please provide an input samplesheet with --input"
</span><span id="__span-4-13"><a id="__codelineno-4-13" name="__codelineno-4-13" href="#__codelineno-4-13"></a>    }
</span><span id="__span-4-14"><a id="__codelineno-4-14" name="__codelineno-4-14" href="#__codelineno-4-14"></a>
</span><span id="__span-4-15"><a id="__codelineno-4-15" name="__codelineno-4-15" href="#__codelineno-4-15"></a>    // Create input channel from samplesheet
</span><span id="__span-4-16"><a id="__codelineno-4-16" name="__codelineno-4-16" href="#__codelineno-4-16"></a>    ch_input = Channel
</span><span id="__span-4-17"><a id="__codelineno-4-17" name="__codelineno-4-17" href="#__codelineno-4-17"></a>        .fromPath(params.input)
</span><span id="__span-4-18"><a id="__codelineno-4-18" name="__codelineno-4-18" href="#__codelineno-4-18"></a>        .splitCsv(header: true)
</span><span id="__span-4-19"><a id="__codelineno-4-19" name="__codelineno-4-19" href="#__codelineno-4-19"></a>        .map { row -&gt;
</span><span id="__span-4-20"><a id="__codelineno-4-20" name="__codelineno-4-20" href="#__codelineno-4-20"></a>            def meta = [:]
</span><span id="__span-4-21"><a id="__codelineno-4-21" name="__codelineno-4-21" href="#__codelineno-4-21"></a>            meta.id = row.sample
</span><span id="__span-4-22"><a id="__codelineno-4-22" name="__codelineno-4-22" href="#__codelineno-4-22"></a>            meta.single_end = false
</span><span id="__span-4-23"><a id="__codelineno-4-23" name="__codelineno-4-23" href="#__codelineno-4-23"></a>
</span><span id="__span-4-24"><a id="__codelineno-4-24" name="__codelineno-4-24" href="#__codelineno-4-24"></a>            def reads = []
</span><span id="__span-4-25"><a id="__codelineno-4-25" name="__codelineno-4-25" href="#__codelineno-4-25"></a>            if (meta.single_end) {
</span><span id="__span-4-26"><a id="__codelineno-4-26" name="__codelineno-4-26" href="#__codelineno-4-26"></a>                reads = [file(row.fastq_1)]
</span><span id="__span-4-27"><a id="__codelineno-4-27" name="__codelineno-4-27" href="#__codelineno-4-27"></a>            } else {
</span><span id="__span-4-28"><a id="__codelineno-4-28" name="__codelineno-4-28" href="#__codelineno-4-28"></a>                reads = [file(row.fastq_1), file(row.fastq_2)]
</span><span id="__span-4-29"><a id="__codelineno-4-29" name="__codelineno-4-29" href="#__codelineno-4-29"></a>            }
</span><span id="__span-4-30"><a id="__codelineno-4-30" name="__codelineno-4-30" href="#__codelineno-4-30"></a>
</span><span id="__span-4-31"><a id="__codelineno-4-31" name="__codelineno-4-31" href="#__codelineno-4-31"></a>            return [meta, reads]
</span><span id="__span-4-32"><a id="__codelineno-4-32" name="__codelineno-4-32" href="#__codelineno-4-32"></a>        }
</span><span id="__span-4-33"><a id="__codelineno-4-33" name="__codelineno-4-33" href="#__codelineno-4-33"></a>
</span><span id="__span-4-34"><a id="__codelineno-4-34" name="__codelineno-4-34" href="#__codelineno-4-34"></a>    // Run QC workflow
</span><span id="__span-4-35"><a id="__codelineno-4-35" name="__codelineno-4-35" href="#__codelineno-4-35"></a>    QC_WORKFLOW(ch_input)
</span><span id="__span-4-36"><a id="__codelineno-4-36" name="__codelineno-4-36" href="#__codelineno-4-36"></a>
</span><span id="__span-4-37"><a id="__codelineno-4-37" name="__codelineno-4-37" href="#__codelineno-4-37"></a>    // Collect software versions
</span><span id="__span-4-38"><a id="__codelineno-4-38" name="__codelineno-4-38" href="#__codelineno-4-38"></a>    ch_versions = QC_WORKFLOW.out.versions.unique().collectFile(name: 'software_versions.yml')
</span><span id="__span-4-39"><a id="__codelineno-4-39" name="__codelineno-4-39" href="#__codelineno-4-39"></a>}
</span><span id="__span-4-40"><a id="__codelineno-4-40" name="__codelineno-4-40" href="#__codelineno-4-40"></a>
</span><span id="__span-4-41"><a id="__codelineno-4-41" name="__codelineno-4-41" href="#__codelineno-4-41"></a>// Workflow completion
</span><span id="__span-4-42"><a id="__codelineno-4-42" name="__codelineno-4-42" href="#__codelineno-4-42"></a>workflow.onComplete {
</span><span id="__span-4-43"><a id="__codelineno-4-43" name="__codelineno-4-43" href="#__codelineno-4-43"></a>    println "Pipeline completed at: $workflow.complete"
</span><span id="__span-4-44"><a id="__codelineno-4-44" name="__codelineno-4-44" href="#__codelineno-4-44"></a>    println "Execution status: ${ workflow.success ? 'OK' : 'failed' }"
</span><span id="__span-4-45"><a id="__codelineno-4-45" name="__codelineno-4-45" href="#__codelineno-4-45"></a>    println "Execution duration: $workflow.duration"
</span><span id="__span-4-46"><a id="__codelineno-4-46" name="__codelineno-4-46" href="#__codelineno-4-46"></a>}
</span></code></pre></div> <p><strong>Step 4: Create configuration</strong></p> <p>Create <code>nextflow.config</code>:</p> <div class="language-groovy highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="c1">// Global default params</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="n">params</span><span class="w"> </span><span class="o">{</span>
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="w">    </span><span class="c1">// Input options</span>
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a><span class="w">    </span><span class="n">input</span><span class="w">                      </span><span class="o">=</span><span class="w"> </span><span class="kc">null</span>
</span><span id="__span-5-5"><a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a><span class="w">    </span><span class="n">outdir</span><span class="w">                     </span><span class="o">=</span><span class="w"> </span><span class="s1">'./results'</span>
</span><span id="__span-5-6"><a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a>
</span><span id="__span-5-7"><a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a><span class="w">    </span><span class="c1">// QC options</span>
</span><span id="__span-5-8"><a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a><span class="w">    </span><span class="n">skip_fastqc</span><span class="w">                </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span>
</span><span id="__span-5-9"><a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a><span class="w">    </span><span class="n">skip_multiqc</span><span class="w">               </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span>
</span><span id="__span-5-10"><a id="__codelineno-5-10" name="__codelineno-5-10" href="#__codelineno-5-10"></a>
</span><span id="__span-5-11"><a id="__codelineno-5-11" name="__codelineno-5-11" href="#__codelineno-5-11"></a><span class="w">    </span><span class="c1">// Trimming options</span>
</span><span id="__span-5-12"><a id="__codelineno-5-12" name="__codelineno-5-12" href="#__codelineno-5-12"></a><span class="w">    </span><span class="n">clip_r1</span><span class="w">                    </span><span class="o">=</span><span class="w"> </span><span class="kc">null</span>
</span><span id="__span-5-13"><a id="__codelineno-5-13" name="__codelineno-5-13" href="#__codelineno-5-13"></a><span class="w">    </span><span class="n">clip_r2</span><span class="w">                    </span><span class="o">=</span><span class="w"> </span><span class="kc">null</span>
</span><span id="__span-5-14"><a id="__codelineno-5-14" name="__codelineno-5-14" href="#__codelineno-5-14"></a><span class="w">    </span><span class="n">three_prime_clip_r1</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="kc">null</span>
</span><span id="__span-5-15"><a id="__codelineno-5-15" name="__codelineno-5-15" href="#__codelineno-5-15"></a><span class="w">    </span><span class="n">three_prime_clip_r2</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="kc">null</span>
</span><span id="__span-5-16"><a id="__codelineno-5-16" name="__codelineno-5-16" href="#__codelineno-5-16"></a><span class="w">    </span><span class="n">trim_nextseq</span><span class="w">               </span><span class="o">=</span><span class="w"> </span><span class="kc">null</span>
</span><span id="__span-5-17"><a id="__codelineno-5-17" name="__codelineno-5-17" href="#__codelineno-5-17"></a><span class="w">    </span><span class="n">save_trimmed</span><span class="w">               </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span>
</span><span id="__span-5-18"><a id="__codelineno-5-18" name="__codelineno-5-18" href="#__codelineno-5-18"></a>
</span><span id="__span-5-19"><a id="__codelineno-5-19" name="__codelineno-5-19" href="#__codelineno-5-19"></a><span class="w">    </span><span class="c1">// Resource limits</span>
</span><span id="__span-5-20"><a id="__codelineno-5-20" name="__codelineno-5-20" href="#__codelineno-5-20"></a><span class="w">    </span><span class="n">max_memory</span><span class="w">                 </span><span class="o">=</span><span class="w"> </span><span class="s1">'128.GB'</span>
</span><span id="__span-5-21"><a id="__codelineno-5-21" name="__codelineno-5-21" href="#__codelineno-5-21"></a><span class="w">    </span><span class="n">max_cpus</span><span class="w">                   </span><span class="o">=</span><span class="w"> </span><span class="mi">16</span>
</span><span id="__span-5-22"><a id="__codelineno-5-22" name="__codelineno-5-22" href="#__codelineno-5-22"></a><span class="w">    </span><span class="n">max_time</span><span class="w">                   </span><span class="o">=</span><span class="w"> </span><span class="s1">'240.h'</span>
</span><span id="__span-5-23"><a id="__codelineno-5-23" name="__codelineno-5-23" href="#__codelineno-5-23"></a><span class="o">}</span>
</span><span id="__span-5-24"><a id="__codelineno-5-24" name="__codelineno-5-24" href="#__codelineno-5-24"></a>
</span><span id="__span-5-25"><a id="__codelineno-5-25" name="__codelineno-5-25" href="#__codelineno-5-25"></a><span class="c1">// Load base config</span>
</span><span id="__span-5-26"><a id="__codelineno-5-26" name="__codelineno-5-26" href="#__codelineno-5-26"></a><span class="n">includeConfig</span><span class="w"> </span><span class="s1">'conf/base.config'</span>
</span><span id="__span-5-27"><a id="__codelineno-5-27" name="__codelineno-5-27" href="#__codelineno-5-27"></a>
</span><span id="__span-5-28"><a id="__codelineno-5-28" name="__codelineno-5-28" href="#__codelineno-5-28"></a><span class="c1">// Profiles</span>
</span><span id="__span-5-29"><a id="__codelineno-5-29" name="__codelineno-5-29" href="#__codelineno-5-29"></a><span class="n">profiles</span><span class="w"> </span><span class="o">{</span>
</span><span id="__span-5-30"><a id="__codelineno-5-30" name="__codelineno-5-30" href="#__codelineno-5-30"></a><span class="w">    </span><span class="n">debug</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">process</span><span class="o">.</span><span class="na">beforeScript</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'echo $HOSTNAME'</span><span class="w"> </span><span class="o">}</span>
</span><span id="__span-5-31"><a id="__codelineno-5-31" name="__codelineno-5-31" href="#__codelineno-5-31"></a><span class="w">    </span><span class="n">conda</span><span class="w"> </span><span class="o">{</span>
</span><span id="__span-5-32"><a id="__codelineno-5-32" name="__codelineno-5-32" href="#__codelineno-5-32"></a><span class="w">        </span><span class="n">conda</span><span class="o">.</span><span class="na">enabled</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
</span><span id="__span-5-33"><a id="__codelineno-5-33" name="__codelineno-5-33" href="#__codelineno-5-33"></a><span class="w">        </span><span class="n">docker</span><span class="o">.</span><span class="na">enabled</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span>
</span><span id="__span-5-34"><a id="__codelineno-5-34" name="__codelineno-5-34" href="#__codelineno-5-34"></a><span class="w">        </span><span class="n">singularity</span><span class="o">.</span><span class="na">enabled</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span>
</span><span id="__span-5-35"><a id="__codelineno-5-35" name="__codelineno-5-35" href="#__codelineno-5-35"></a><span class="w">        </span><span class="n">podman</span><span class="o">.</span><span class="na">enabled</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span>
</span><span id="__span-5-36"><a id="__codelineno-5-36" name="__codelineno-5-36" href="#__codelineno-5-36"></a><span class="w">        </span><span class="n">shifter</span><span class="o">.</span><span class="na">enabled</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span>
</span><span id="__span-5-37"><a id="__codelineno-5-37" name="__codelineno-5-37" href="#__codelineno-5-37"></a><span class="w">        </span><span class="n">charliecloud</span><span class="o">.</span><span class="na">enabled</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span>
</span><span id="__span-5-38"><a id="__codelineno-5-38" name="__codelineno-5-38" href="#__codelineno-5-38"></a><span class="w">    </span><span class="o">}</span>
</span><span id="__span-5-39"><a id="__codelineno-5-39" name="__codelineno-5-39" href="#__codelineno-5-39"></a><span class="w">    </span><span class="n">docker</span><span class="w"> </span><span class="o">{</span>
</span><span id="__span-5-40"><a id="__codelineno-5-40" name="__codelineno-5-40" href="#__codelineno-5-40"></a><span class="w">        </span><span class="n">docker</span><span class="o">.</span><span class="na">enabled</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
</span><span id="__span-5-41"><a id="__codelineno-5-41" name="__codelineno-5-41" href="#__codelineno-5-41"></a><span class="w">        </span><span class="n">docker</span><span class="o">.</span><span class="na">userEmulation</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
</span><span id="__span-5-42"><a id="__codelineno-5-42" name="__codelineno-5-42" href="#__codelineno-5-42"></a><span class="w">        </span><span class="n">singularity</span><span class="o">.</span><span class="na">enabled</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span>
</span><span id="__span-5-43"><a id="__codelineno-5-43" name="__codelineno-5-43" href="#__codelineno-5-43"></a><span class="w">        </span><span class="n">podman</span><span class="o">.</span><span class="na">enabled</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span>
</span><span id="__span-5-44"><a id="__codelineno-5-44" name="__codelineno-5-44" href="#__codelineno-5-44"></a><span class="w">        </span><span class="n">shifter</span><span class="o">.</span><span class="na">enabled</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span>
</span><span id="__span-5-45"><a id="__codelineno-5-45" name="__codelineno-5-45" href="#__codelineno-5-45"></a><span class="w">        </span><span class="n">charliecloud</span><span class="o">.</span><span class="na">enabled</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span>
</span><span id="__span-5-46"><a id="__codelineno-5-46" name="__codelineno-5-46" href="#__codelineno-5-46"></a><span class="w">    </span><span class="o">}</span>
</span><span id="__span-5-47"><a id="__codelineno-5-47" name="__codelineno-5-47" href="#__codelineno-5-47"></a><span class="w">    </span><span class="n">singularity</span><span class="w"> </span><span class="o">{</span>
</span><span id="__span-5-48"><a id="__codelineno-5-48" name="__codelineno-5-48" href="#__codelineno-5-48"></a><span class="w">        </span><span class="n">singularity</span><span class="o">.</span><span class="na">enabled</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
</span><span id="__span-5-49"><a id="__codelineno-5-49" name="__codelineno-5-49" href="#__codelineno-5-49"></a><span class="w">        </span><span class="n">singularity</span><span class="o">.</span><span class="na">autoMounts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
</span><span id="__span-5-50"><a id="__codelineno-5-50" name="__codelineno-5-50" href="#__codelineno-5-50"></a><span class="w">        </span><span class="n">docker</span><span class="o">.</span><span class="na">enabled</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span>
</span><span id="__span-5-51"><a id="__codelineno-5-51" name="__codelineno-5-51" href="#__codelineno-5-51"></a><span class="w">        </span><span class="n">podman</span><span class="o">.</span><span class="na">enabled</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span>
</span><span id="__span-5-52"><a id="__codelineno-5-52" name="__codelineno-5-52" href="#__codelineno-5-52"></a><span class="w">        </span><span class="n">shifter</span><span class="o">.</span><span class="na">enabled</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span>
</span><span id="__span-5-53"><a id="__codelineno-5-53" name="__codelineno-5-53" href="#__codelineno-5-53"></a><span class="w">        </span><span class="n">charliecloud</span><span class="o">.</span><span class="na">enabled</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span>
</span><span id="__span-5-54"><a id="__codelineno-5-54" name="__codelineno-5-54" href="#__codelineno-5-54"></a><span class="w">    </span><span class="o">}</span>
</span><span id="__span-5-55"><a id="__codelineno-5-55" name="__codelineno-5-55" href="#__codelineno-5-55"></a><span class="w">    </span><span class="n">test</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">includeConfig</span><span class="w"> </span><span class="s1">'conf/test.config'</span><span class="w"> </span><span class="o">}</span>
</span><span id="__span-5-56"><a id="__codelineno-5-56" name="__codelineno-5-56" href="#__codelineno-5-56"></a><span class="o">}</span>
</span></code></pre></div> <p><strong>Run the modular pipeline:</strong></p> <div class="language-bash highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="c1"># Create a sample sheet</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">"sample,fastq_1,fastq_2"</span><span class="w"> </span>&gt;<span class="w"> </span>samplesheet.csv
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">"sample1,data/sample1_R1.fastq.gz,data/sample1_R2.fastq.gz"</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>samplesheet.csv
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a>
</span><span id="__span-6-5"><a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a><span class="c1"># Run the pipeline</span>
</span><span id="__span-6-6"><a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a>nextflow<span class="w"> </span>run<span class="w"> </span>main.nf<span class="w"> </span>--input<span class="w"> </span>samplesheet.csv<span class="w"> </span>--outdir<span class="w"> </span>results<span class="w"> </span>-profile<span class="w"> </span>docker
</span></code></pre></div> <details class="success"> <summary>Expected output</summary> <div class="language-text highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>N E X T F L O W  ~  version 23.10.0
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>Launching `main.nf` [amazing_volta] - revision: a1b2c3d4
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a>
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a>executor &gt;  local (6)
</span><span id="__span-7-5"><a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a>[a1/b2c3d4] process &gt; QC_WORKFLOW:FASTQC (sample1)           [100%] 1 of 1 ✔
</span><span id="__span-7-6"><a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a>[e5/f6g7h8] process &gt; QC_WORKFLOW:TRIMMOMATIC (sample1)      [100%] 1 of 1 ✔
</span><span id="__span-7-7"><a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a>[i9/j0k1l2] process &gt; QC_WORKFLOW:FASTQC_TRIMMED (sample1)   [100%] 1 of 1 ✔
</span><span id="__span-7-8"><a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a>[m3/n4o5p6] process &gt; QC_WORKFLOW:MULTIQC                    [100%] 1 of 1 ✔
</span><span id="__span-7-9"><a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a>
</span><span id="__span-7-10"><a id="__codelineno-7-10" name="__codelineno-7-10" href="#__codelineno-7-10"></a>Pipeline completed at: 2024-01-15T10:30:45.123Z
</span><span id="__span-7-11"><a id="__codelineno-7-11" name="__codelineno-7-11" href="#__codelineno-7-11"></a>Execution status: OK
</span><span id="__span-7-12"><a id="__codelineno-7-12" name="__codelineno-7-12" href="#__codelineno-7-12"></a>Execution duration: 2m 15s
</span></code></pre></div> </details> <h2 id="part-2-gitgithub-integration-for-collaborative-development">Part 2: Git/GitHub Integration for Collaborative Development<a class="headerlink" href="#part-2-gitgithub-integration-for-collaborative-development" title="Permanent link">¶</a></h2> <h3 id="why-version-control-matters-for-bioinformatics">Why Version Control Matters for Bioinformatics<a class="headerlink" href="#why-version-control-matters-for-bioinformatics" title="Permanent link">¶</a></h3> <p>Version control isn't just for software developers - it's essential for reproducible science and collaborative research. Let's see why:</p> <div id="version-control-benefits" style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin: 20px 0;"> <h4>🔄 Version Control Impact Calculator</h4> <p>See how Git/GitHub transforms your research workflow:</p> <div style="margin: 10px 0;"> <label for="team-size">Team size:</label> <input type="range" id="team-size" min="1" max="20" value="5" style="width: 200px;"> <span id="team-display">5</span> people </div> <div style="margin: 10px 0;"> <label for="project-duration">Project duration (months):</label> <input type="range" id="project-duration" min="1" max="36" value="12" style="width: 200px;"> <span id="duration-display">12</span> months </div> <div style="display: flex; gap: 20px; margin: 20px 0;"> <div style="flex: 1; background: #ffebee; padding: 15px; border-radius: 8px; border-left: 4px solid #f44336;"> <h5>📧 Email/Dropbox Approach</h5> <ul style="margin: 10px 0; padding-left: 20px; font-size: 0.9em;"> <li>Version conflicts: <span id="conflicts-email">60</span> per month</li> <li>Lost work incidents: <span id="lost-work">12</span> total</li> <li>Time spent on coordination: <span id="coord-time">40</span> hours/month</li> <li>Reproducibility issues: <span id="repro-issues">High</span></li> </ul> </div> <div style="flex: 1; background: #e8f5e8; padding: 15px; border-radius: 8px; border-left: 4px solid #4caf50;"> <h5>🚀 Git/GitHub Approach</h5> <ul style="margin: 10px 0; padding-left: 20px; font-size: 0.9em;"> <li>Version conflicts: <span id="conflicts-git">2</span> per month</li> <li>Lost work incidents: <span id="lost-work-git">0</span> total</li> <li>Time spent on coordination: <span id="coord-time-git">5</span> hours/month</li> <li>Reproducibility issues: <span id="repro-git">None</span></li> </ul> </div> </div> <div style="text-align: center; margin-top: 15px; font-size: 1.2em; font-weight: bold; color: #2e7d32;"> Time saved per project: <span id="time-saved-git">420</span> hours </div> </div> <script>
function updateGitCalculator() {
    const teamSize = document.getElementById('team-size').value;
    const duration = document.getElementById('project-duration').value;

    document.getElementById('team-display').textContent = teamSize;
    document.getElementById('duration-display').textContent = duration;

    // Calculate impacts
    const conflictsEmail = Math.round(teamSize * teamSize * 2);
    const conflictsGit = Math.max(1, Math.round(teamSize * 0.4));
    const lostWork = Math.round(teamSize * duration * 0.2);
    const coordTimeEmail = Math.round(teamSize * 8);
    const coordTimeGit = Math.max(2, Math.round(teamSize * 1));
    const timeSaved = (coordTimeEmail - coordTimeGit) * duration;

    document.getElementById('conflicts-email').textContent = conflictsEmail;
    document.getElementById('conflicts-git').textContent = conflictsGit;
    document.getElementById('lost-work').textContent = lostWork;
    document.getElementById('lost-work-git').textContent = '0';
    document.getElementById('coord-time').textContent = coordTimeEmail;
    document.getElementById('coord-time-git').textContent = coordTimeGit;
    document.getElementById('time-saved-git').textContent = timeSaved;
}

document.getElementById('team-size').addEventListener('input', updateGitCalculator);
document.getElementById('project-duration').addEventListener('input', updateGitCalculator);
updateGitCalculator();
</script> <h3 id="exercise-2-setting-up-gitgithub-for-your-pipeline-30-minutes">Exercise 2: Setting Up Git/GitHub for Your Pipeline (30 minutes)<a class="headerlink" href="#exercise-2-setting-up-gitgithub-for-your-pipeline-30-minutes" title="Permanent link">¶</a></h3> <p><strong>Objective</strong>: Transform your local pipeline into a collaborative, version-controlled project</p> <p><strong>Step 1: Initialize Git repository</strong></p> <div class="language-bash highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="c1"># Navigate to your pipeline directory</span>
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="nb">cd</span><span class="w"> </span>mtb-pipeline
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a>
</span><span id="__span-8-4"><a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a><span class="c1"># Initialize Git</span>
</span><span id="__span-8-5"><a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a>git<span class="w"> </span>init
</span></code></pre></div> <details class="success"> <summary>Expected output</summary> <div class="language-text highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>Initialized empty Git repository in /path/to/mtb-pipeline/.git/
</span></code></pre></div> </details> <p><strong>Step 2: Create essential files</strong></p> <p>Create <code>.gitignore</code>: </p><div class="language-text highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>```text
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a># Nextflow files
</span><span id="__span-10-3"><a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a>work/
</span><span id="__span-10-4"><a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a>.nextflow/
</span><span id="__span-10-5"><a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a>.nextflow.log*
</span><span id="__span-10-6"><a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a>timeline.html
</span><span id="__span-10-7"><a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a>report.html
</span><span id="__span-10-8"><a id="__codelineno-10-8" name="__codelineno-10-8" href="#__codelineno-10-8"></a>trace.txt
</span><span id="__span-10-9"><a id="__codelineno-10-9" name="__codelineno-10-9" href="#__codelineno-10-9"></a>dag.dot
</span><span id="__span-10-10"><a id="__codelineno-10-10" name="__codelineno-10-10" href="#__codelineno-10-10"></a>dag.html
</span><span id="__span-10-11"><a id="__codelineno-10-11" name="__codelineno-10-11" href="#__codelineno-10-11"></a>
</span><span id="__span-10-12"><a id="__codelineno-10-12" name="__codelineno-10-12" href="#__codelineno-10-12"></a># Results (optional - you might want to track some results)
</span><span id="__span-10-13"><a id="__codelineno-10-13" name="__codelineno-10-13" href="#__codelineno-10-13"></a>results/
</span><span id="__span-10-14"><a id="__codelineno-10-14" name="__codelineno-10-14" href="#__codelineno-10-14"></a>
</span><span id="__span-10-15"><a id="__codelineno-10-15" name="__codelineno-10-15" href="#__codelineno-10-15"></a># IDE files
</span><span id="__span-10-16"><a id="__codelineno-10-16" name="__codelineno-10-16" href="#__codelineno-10-16"></a>.vscode/
</span><span id="__span-10-17"><a id="__codelineno-10-17" name="__codelineno-10-17" href="#__codelineno-10-17"></a>.idea/
</span><span id="__span-10-18"><a id="__codelineno-10-18" name="__codelineno-10-18" href="#__codelineno-10-18"></a>
</span><span id="__span-10-19"><a id="__codelineno-10-19" name="__codelineno-10-19" href="#__codelineno-10-19"></a># OS files
</span><span id="__span-10-20"><a id="__codelineno-10-20" name="__codelineno-10-20" href="#__codelineno-10-20"></a>.DS_Store
</span><span id="__span-10-21"><a id="__codelineno-10-21" name="__codelineno-10-21" href="#__codelineno-10-21"></a>Thumbs.db
</span><span id="__span-10-22"><a id="__codelineno-10-22" name="__codelineno-10-22" href="#__codelineno-10-22"></a>
</span><span id="__span-10-23"><a id="__codelineno-10-23" name="__codelineno-10-23" href="#__codelineno-10-23"></a># Temporary files
</span><span id="__span-10-24"><a id="__codelineno-10-24" name="__codelineno-10-24" href="#__codelineno-10-24"></a>*.tmp
</span><span id="__span-10-25"><a id="__codelineno-10-25" name="__codelineno-10-25" href="#__codelineno-10-25"></a>*.temp
</span></code></pre></div><p></p> <p>Create <code>README.md</code>:</p> <div class="language-markdown highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="gh"># MTB Genomics Pipeline</span>
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a>
</span><span id="__span-11-3"><a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a>A modular Nextflow pipeline for Mycobacterium tuberculosis genomic analysis.
</span><span id="__span-11-4"><a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a>
</span><span id="__span-11-5"><a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a><span class="gu">## Quick Start</span>
</span><span id="__span-11-6"><a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a>
</span><span id="__span-11-7"><a id="__codelineno-11-7" name="__codelineno-11-7" href="#__codelineno-11-7"></a>```bash
</span><span id="__span-11-8"><a id="__codelineno-11-8" name="__codelineno-11-8" href="#__codelineno-11-8"></a><span class="gh"># Clone the repository</span>
</span><span id="__span-11-9"><a id="__codelineno-11-9" name="__codelineno-11-9" href="#__codelineno-11-9"></a>git clone https://github.com/yourusername/mtb-pipeline.git
</span><span id="__span-11-10"><a id="__codelineno-11-10" name="__codelineno-11-10" href="#__codelineno-11-10"></a>cd mtb-pipeline
</span><span id="__span-11-11"><a id="__codelineno-11-11" name="__codelineno-11-11" href="#__codelineno-11-11"></a>
</span><span id="__span-11-12"><a id="__codelineno-11-12" name="__codelineno-11-12" href="#__codelineno-11-12"></a><span class="gh"># Run with test data</span>
</span><span id="__span-11-13"><a id="__codelineno-11-13" name="__codelineno-11-13" href="#__codelineno-11-13"></a>nextflow run main.nf --input test_data/samplesheet.csv -profile test,docker
</span><span id="__span-11-14"><a id="__codelineno-11-14" name="__codelineno-11-14" href="#__codelineno-11-14"></a>
</span><span id="__span-11-15"><a id="__codelineno-11-15" name="__codelineno-11-15" href="#__codelineno-11-15"></a><span class="gh"># Run with your data</span>
</span><span id="__span-11-16"><a id="__codelineno-11-16" name="__codelineno-11-16" href="#__codelineno-11-16"></a>nextflow run main.nf --input samplesheet.csv --outdir results -profile docker
</span></code></pre></div> <h2 id="features">Features<a class="headerlink" href="#features" title="Permanent link">¶</a></h2> <ul> <li>🧬 Quality control with FastQC and MultiQC</li> <li>✂️ Adapter trimming with Trimmomatic</li> <li>📊 Comprehensive reporting</li> <li>🐳 Containerized for reproducibility</li> <li>⚡ Scalable from laptop to HPC</li> </ul> <h2 id="requirements">Requirements<a class="headerlink" href="#requirements" title="Permanent link">¶</a></h2> <ul> <li>Nextflow (≥ 23.04.0)</li> <li>Docker or Singularity</li> <li>4+ GB RAM</li> </ul> <h2 id="input">Input<a class="headerlink" href="#input" title="Permanent link">¶</a></h2> <p>Provide a CSV samplesheet with the following columns:</p> <table> <thead> <tr> <th>Column</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>sample</td> <td>Sample identifier</td> </tr> <tr> <td>fastq_1</td> <td>Path to R1 FASTQ file</td> </tr> <tr> <td>fastq_2</td> <td>Path to R2 FASTQ file</td> </tr> </tbody> </table> <h2 id="output">Output<a class="headerlink" href="#output" title="Permanent link">¶</a></h2> <ul> <li><code>fastqc/</code> - Quality control reports</li> <li><code>trimmed/</code> - Trimmed FASTQ files</li> <li><code>multiqc/</code> - Aggregated QC report</li> </ul> <h2 id="citation">Citation<a class="headerlink" href="#citation" title="Permanent link">¶</a></h2> <p>If you use this pipeline, please cite: [Your publication here]</p> <h2 id="license">License<a class="headerlink" href="#license" title="Permanent link">¶</a></h2> <p>MIT License - see LICENSE file for details. </p><div class="language-text highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>**Step 3: Make your first commit**
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a>
</span><span id="__span-12-3"><a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a>```bash
</span><span id="__span-12-4"><a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a># Add files to staging
</span><span id="__span-12-5"><a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a>git add .
</span><span id="__span-12-6"><a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a>
</span><span id="__span-12-7"><a id="__codelineno-12-7" name="__codelineno-12-7" href="#__codelineno-12-7"></a># Make initial commit
</span><span id="__span-12-8"><a id="__codelineno-12-8" name="__codelineno-12-8" href="#__codelineno-12-8"></a>git commit -m "Initial commit: MTB QC pipeline with modular structure"
</span></code></pre></div><p></p> <details class="success"> <summary>Expected output</summary> <div class="language-text highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a>[main (root-commit) a1b2c3d] Initial commit: MTB QC pipeline with modular structure
</span><span id="__span-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a> 8 files changed, 245 insertions(+)
</span><span id="__span-13-3"><a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a> create mode 100644 .gitignore
</span><span id="__span-13-4"><a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a> create mode 100644 README.md
</span><span id="__span-13-5"><a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a> create mode 100644 main.nf
</span><span id="__span-13-6"><a id="__codelineno-13-6" name="__codelineno-13-6" href="#__codelineno-13-6"></a> create mode 100644 nextflow.config
</span><span id="__span-13-7"><a id="__codelineno-13-7" name="__codelineno-13-7" href="#__codelineno-13-7"></a> create mode 100644 modules/fastqc.nf
</span><span id="__span-13-8"><a id="__codelineno-13-8" name="__codelineno-13-8" href="#__codelineno-13-8"></a> create mode 100644 subworkflows/qc_workflow.nf
</span><span id="__span-13-9"><a id="__codelineno-13-9" name="__codelineno-13-9" href="#__codelineno-13-9"></a> create mode 100644 conf/base.config
</span></code></pre></div> </details> <p><strong>Step 4: Create GitHub repository and push</strong></p> <div class="language-bash highlight"><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="c1"># Create repository on GitHub (via web interface or GitHub CLI)</span>
</span><span id="__span-14-2"><a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a>gh<span class="w"> </span>repo<span class="w"> </span>create<span class="w"> </span>mtb-pipeline<span class="w"> </span>--public<span class="w"> </span>--description<span class="w"> </span><span class="s2">"MTB genomics analysis pipeline"</span>
</span><span id="__span-14-3"><a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a>
</span><span id="__span-14-4"><a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a><span class="c1"># Add remote and push</span>
</span><span id="__span-14-5"><a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a>git<span class="w"> </span>remote<span class="w"> </span>add<span class="w"> </span>origin<span class="w"> </span>https://github.com/yourusername/mtb-pipeline.git
</span><span id="__span-14-6"><a id="__codelineno-14-6" name="__codelineno-14-6" href="#__codelineno-14-6"></a>git<span class="w"> </span>branch<span class="w"> </span>-M<span class="w"> </span>main
</span><span id="__span-14-7"><a id="__codelineno-14-7" name="__codelineno-14-7" href="#__codelineno-14-7"></a>git<span class="w"> </span>push<span class="w"> </span>-u<span class="w"> </span>origin<span class="w"> </span>main
</span></code></pre></div> <details class="success"> <summary>Expected output</summary> <div class="language-text highlight"><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a>Enumerating objects: 10, done.
</span><span id="__span-15-2"><a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a>Counting objects: 100% (10/10), done.
</span><span id="__span-15-3"><a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a>Delta compression using up to 8 threads
</span><span id="__span-15-4"><a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a>Compressing objects: 100% (8/8), done.
</span><span id="__span-15-5"><a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a>Writing objects: 100% (10/10), 2.45 KiB | 2.45 MiB/s, done.
</span><span id="__span-15-6"><a id="__codelineno-15-6" name="__codelineno-15-6" href="#__codelineno-15-6"></a>Total 10 (delta 0), reused 0 (delta 0), pack-reused 0
</span><span id="__span-15-7"><a id="__codelineno-15-7" name="__codelineno-15-7" href="#__codelineno-15-7"></a>To https://github.com/yourusername/mtb-pipeline.git
</span><span id="__span-15-8"><a id="__codelineno-15-8" name="__codelineno-15-8" href="#__codelineno-15-8"></a> * [new branch]      main -&gt; main
</span><span id="__span-15-9"><a id="__codelineno-15-9" name="__codelineno-15-9" href="#__codelineno-15-9"></a>Branch 'main' set up to track remote branch 'main' from 'origin'.
</span></code></pre></div> </details> <h3 id="exercise-3-setting-up-automated-testing-with-github-actions-30-minutes">Exercise 3: Setting Up Automated Testing with GitHub Actions (30 minutes)<a class="headerlink" href="#exercise-3-setting-up-automated-testing-with-github-actions-30-minutes" title="Permanent link">¶</a></h3> <p><strong>Objective</strong>: Implement continuous integration for your pipeline</p> <p><strong>Step 1: Create GitHub Actions workflow</strong></p> <p>Create <code>.github/workflows/ci.yml</code>:</p> <div class="language-yaml highlight"><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">CI</span>
</span><span id="__span-16-2"><a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a><span class="nt">on</span><span class="p">:</span>
</span><span id="__span-16-3"><a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a><span class="w">  </span><span class="nt">push</span><span class="p">:</span>
</span><span id="__span-16-4"><a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a><span class="w">    </span><span class="nt">branches</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="w"> </span><span class="nv">main</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">dev</span><span class="w"> </span><span class="p p-Indicator">]</span>
</span><span id="__span-16-5"><a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a><span class="w">  </span><span class="nt">pull_request</span><span class="p">:</span>
</span><span id="__span-16-6"><a id="__codelineno-16-6" name="__codelineno-16-6" href="#__codelineno-16-6"></a><span class="w">    </span><span class="nt">branches</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="w"> </span><span class="nv">main</span><span class="w"> </span><span class="p p-Indicator">]</span>
</span><span id="__span-16-7"><a id="__codelineno-16-7" name="__codelineno-16-7" href="#__codelineno-16-7"></a>
</span><span id="__span-16-8"><a id="__codelineno-16-8" name="__codelineno-16-8" href="#__codelineno-16-8"></a><span class="nt">jobs</span><span class="p">:</span>
</span><span id="__span-16-9"><a id="__codelineno-16-9" name="__codelineno-16-9" href="#__codelineno-16-9"></a><span class="w">  </span><span class="nt">test</span><span class="p">:</span>
</span><span id="__span-16-10"><a id="__codelineno-16-10" name="__codelineno-16-10" href="#__codelineno-16-10"></a><span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Run pipeline tests</span>
</span><span id="__span-16-11"><a id="__codelineno-16-11" name="__codelineno-16-11" href="#__codelineno-16-11"></a><span class="w">    </span><span class="nt">runs-on</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ubuntu-latest</span>
</span><span id="__span-16-12"><a id="__codelineno-16-12" name="__codelineno-16-12" href="#__codelineno-16-12"></a><span class="w">    </span><span class="nt">strategy</span><span class="p">:</span>
</span><span id="__span-16-13"><a id="__codelineno-16-13" name="__codelineno-16-13" href="#__codelineno-16-13"></a><span class="w">      </span><span class="nt">matrix</span><span class="p">:</span>
</span><span id="__span-16-14"><a id="__codelineno-16-14" name="__codelineno-16-14" href="#__codelineno-16-14"></a><span class="w">        </span><span class="nt">NXF_VER</span><span class="p">:</span>
</span><span id="__span-16-15"><a id="__codelineno-16-15" name="__codelineno-16-15" href="#__codelineno-16-15"></a><span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">'23.04.0'</span>
</span><span id="__span-16-16"><a id="__codelineno-16-16" name="__codelineno-16-16" href="#__codelineno-16-16"></a><span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">'23.10.0'</span>
</span><span id="__span-16-17"><a id="__codelineno-16-17" name="__codelineno-16-17" href="#__codelineno-16-17"></a><span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">'latest-everything'</span>
</span><span id="__span-16-18"><a id="__codelineno-16-18" name="__codelineno-16-18" href="#__codelineno-16-18"></a><span class="w">    </span><span class="nt">steps</span><span class="p">:</span>
</span><span id="__span-16-19"><a id="__codelineno-16-19" name="__codelineno-16-19" href="#__codelineno-16-19"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Check out pipeline code</span>
</span><span id="__span-16-20"><a id="__codelineno-16-20" name="__codelineno-16-20" href="#__codelineno-16-20"></a><span class="w">        </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">actions/checkout@v3</span>
</span><span id="__span-16-21"><a id="__codelineno-16-21" name="__codelineno-16-21" href="#__codelineno-16-21"></a>
</span><span id="__span-16-22"><a id="__codelineno-16-22" name="__codelineno-16-22" href="#__codelineno-16-22"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Install Nextflow</span>
</span><span id="__span-16-23"><a id="__codelineno-16-23" name="__codelineno-16-23" href="#__codelineno-16-23"></a><span class="w">        </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nf-core/setup-nextflow@v1</span>
</span><span id="__span-16-24"><a id="__codelineno-16-24" name="__codelineno-16-24" href="#__codelineno-16-24"></a><span class="w">        </span><span class="nt">with</span><span class="p">:</span>
</span><span id="__span-16-25"><a id="__codelineno-16-25" name="__codelineno-16-25" href="#__codelineno-16-25"></a><span class="w">          </span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s">"${{</span><span class="nv"> </span><span class="s">matrix.NXF_VER</span><span class="nv"> </span><span class="s">}}"</span>
</span><span id="__span-16-26"><a id="__codelineno-16-26" name="__codelineno-16-26" href="#__codelineno-16-26"></a>
</span><span id="__span-16-27"><a id="__codelineno-16-27" name="__codelineno-16-27" href="#__codelineno-16-27"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Run pipeline with test data</span>
</span><span id="__span-16-28"><a id="__codelineno-16-28" name="__codelineno-16-28" href="#__codelineno-16-28"></a><span class="w">        </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
</span><span id="__span-16-29"><a id="__codelineno-16-29" name="__codelineno-16-29" href="#__codelineno-16-29"></a><span class="w">          </span><span class="no">nextflow run ${GITHUB_WORKSPACE} -profile test,docker --outdir ./results</span>
</span></code></pre></div> <p><strong>Step 2: Create test configuration</strong></p> <p>Create <code>conf/test.config</code>:</p> <div class="language-groovy highlight"><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="c1">// Test configuration</span>
</span><span id="__span-17-2"><a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a><span class="n">params</span><span class="w"> </span><span class="o">{</span>
</span><span id="__span-17-3"><a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a><span class="w">    </span><span class="n">config_profile_name</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="s1">'Test profile'</span>
</span><span id="__span-17-4"><a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a><span class="w">    </span><span class="n">config_profile_description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'Minimal test dataset to check pipeline function'</span>
</span><span id="__span-17-5"><a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a>
</span><span id="__span-17-6"><a id="__codelineno-17-6" name="__codelineno-17-6" href="#__codelineno-17-6"></a><span class="w">    </span><span class="c1">// Limit resources so that this can run on GitHub Actions</span>
</span><span id="__span-17-7"><a id="__codelineno-17-7" name="__codelineno-17-7" href="#__codelineno-17-7"></a><span class="w">    </span><span class="n">max_cpus</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span>
</span><span id="__span-17-8"><a id="__codelineno-17-8" name="__codelineno-17-8" href="#__codelineno-17-8"></a><span class="w">    </span><span class="n">max_memory</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'6.GB'</span>
</span><span id="__span-17-9"><a id="__codelineno-17-9" name="__codelineno-17-9" href="#__codelineno-17-9"></a><span class="w">    </span><span class="n">max_time</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="s1">'6.h'</span>
</span><span id="__span-17-10"><a id="__codelineno-17-10" name="__codelineno-17-10" href="#__codelineno-17-10"></a>
</span><span id="__span-17-11"><a id="__codelineno-17-11" name="__codelineno-17-11" href="#__codelineno-17-11"></a><span class="w">    </span><span class="c1">// Input data</span>
</span><span id="__span-17-12"><a id="__codelineno-17-12" name="__codelineno-17-12" href="#__codelineno-17-12"></a><span class="w">    </span><span class="n">input</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'https://raw.githubusercontent.com/nf-core/test-datasets/viralrecon/samplesheet/samplesheet_test_illumina_amplicon.csv'</span>
</span><span id="__span-17-13"><a id="__codelineno-17-13" name="__codelineno-17-13" href="#__codelineno-17-13"></a><span class="o">}</span>
</span></code></pre></div> <p><strong>Step 3: Commit and push changes</strong></p> <div class="language-bash highlight"><pre><span></span><code><span id="__span-18-1"><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="c1"># Add new files</span>
</span><span id="__span-18-2"><a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a>git<span class="w"> </span>add<span class="w"> </span>.github/<span class="w"> </span>conf/test.config
</span><span id="__span-18-3"><a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a>
</span><span id="__span-18-4"><a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a><span class="c1"># Commit changes</span>
</span><span id="__span-18-5"><a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a>git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s2">"Add CI/CD with GitHub Actions and test configuration"</span>
</span><span id="__span-18-6"><a id="__codelineno-18-6" name="__codelineno-18-6" href="#__codelineno-18-6"></a>
</span><span id="__span-18-7"><a id="__codelineno-18-7" name="__codelineno-18-7" href="#__codelineno-18-7"></a><span class="c1"># Push to GitHub</span>
</span><span id="__span-18-8"><a id="__codelineno-18-8" name="__codelineno-18-8" href="#__codelineno-18-8"></a>git<span class="w"> </span>push<span class="w"> </span>origin<span class="w"> </span>main
</span></code></pre></div> <details class="success"> <summary>Expected result</summary> <div class="language-text highlight"><pre><span></span><code><span id="__span-19-1"><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a>[main a1b2c3d] Add CI/CD with GitHub Actions and test configuration
</span><span id="__span-19-2"><a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a> 2 files changed, 45 insertions(+)
</span><span id="__span-19-3"><a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a> create mode 100644 .github/workflows/ci.yml
</span><span id="__span-19-4"><a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a> create mode 100644 conf/test.config
</span><span id="__span-19-5"><a id="__codelineno-19-5" name="__codelineno-19-5" href="#__codelineno-19-5"></a>
</span><span id="__span-19-6"><a id="__codelineno-19-6" name="__codelineno-19-6" href="#__codelineno-19-6"></a>Enumerating objects: 7, done.
</span><span id="__span-19-7"><a id="__codelineno-19-7" name="__codelineno-19-7" href="#__codelineno-19-7"></a>Counting objects: 100% (7/7), done.
</span><span id="__span-19-8"><a id="__codelineno-19-8" name="__codelineno-19-8" href="#__codelineno-19-8"></a>Delta compression using up to 8 threads
</span><span id="__span-19-9"><a id="__codelineno-19-9" name="__codelineno-19-9" href="#__codelineno-19-9"></a>Compressing objects: 100% (5/5), done.
</span><span id="__span-19-10"><a id="__codelineno-19-10" name="__codelineno-19-10" href="#__codelineno-19-10"></a>Writing objects: 100% (6/6), 1.23 KiB | 1.23 MiB/s, done.
</span><span id="__span-19-11"><a id="__codelineno-19-11" name="__codelineno-19-11" href="#__codelineno-19-11"></a>Total 6 (delta 1), reused 0 (delta 0), pack-reused 0
</span><span id="__span-19-12"><a id="__codelineno-19-12" name="__codelineno-19-12" href="#__codelineno-19-12"></a>To https://github.com/yourusername/mtb-pipeline.git
</span><span id="__span-19-13"><a id="__codelineno-19-13" name="__codelineno-19-13" href="#__codelineno-19-13"></a>   1a2b3c4..5d6e7f8  main -&gt; main
</span></code></pre></div> </details> <h2 id="part-3-advanced-nextflow-features-performance-optimization">Part 3: Advanced Nextflow Features &amp; Performance Optimization<a class="headerlink" href="#part-3-advanced-nextflow-features-performance-optimization" title="Permanent link">¶</a></h2> <h3 id="understanding-advanced-pipeline-patterns">Understanding Advanced Pipeline Patterns<a class="headerlink" href="#understanding-advanced-pipeline-patterns" title="Permanent link">¶</a></h3> <div id="advanced-features" style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin: 20px 0;"> <h4>🚀 Advanced Features Explorer</h4> <p>Discover powerful Nextflow features that separate professional pipelines from basic scripts:</p> <div style="margin: 15px 0;"> <button class="feature-btn" data-feature="operators" style="display: block; width: 100%; padding: 12px; margin: 8px 0; background: #e3f2fd; border: 1px solid #2196f3; border-radius: 5px; text-align: left; cursor: pointer;"> 🔄 Advanced Channel Operators </button> <button class="feature-btn" data-feature="caching" style="display: block; width: 100%; padding: 12px; margin: 8px 0; background: #f3e5f5; border: 1px solid #9c27b0; border-radius: 5px; text-align: left; cursor: pointer;"> 💾 Intelligent Caching &amp; Resume </button> <button class="feature-btn" data-feature="error" style="display: block; width: 100%; padding: 12px; margin: 8px 0; background: #fff3e0; border: 1px solid #ff9800; border-radius: 5px; text-align: left; cursor: pointer;"> 🛡️ Error Handling &amp; Retry Logic </button> <button class="feature-btn" data-feature="resources" style="display: block; width: 100%; padding: 12px; margin: 8px 0; background: #e8f5e8; border: 1px solid #4caf50; border-radius: 5px; text-align: left; cursor: pointer;"> ⚡ Dynamic Resource Allocation </button> <button class="feature-btn" data-feature="monitoring" style="display: block; width: 100%; padding: 12px; margin: 8px 0; background: #ffebee; border: 1px solid #f44336; border-radius: 5px; text-align: left; cursor: pointer;"> 📊 Pipeline Monitoring &amp; Reporting </button> </div> <div id="feature-display" style="margin-top: 20px; padding: 15px; background: white; border-radius: 5px; display: none;"> <div id="feature-content"></div> </div> </div> <script>
const advancedFeatures = {
    operators: {
        title: "🔄 Advanced Channel Operators",
        content: `
<strong>Transform your data flow with powerful operators:</strong>

<pre style="background: #f5f5f5; padding: 15px; border-radius: 5px;">
// Combine multiple channels
reads_ch = Channel.fromFilePairs(params.reads)
metadata_ch = Channel.fromPath(params.metadata)
combined_ch = reads_ch.combine(metadata_ch)

// Join channels by key
samples_ch = Channel.from([
    ['sample1', 'condition_A'],
    ['sample2', 'condition_B']
])
reads_with_meta = reads_ch.join(samples_ch)

// Filter and transform
large_files = reads_ch.filter { sample, files ->
    files[0].size() > 1000000
}

// Group by condition
grouped = reads_with_meta.groupTuple(by: 1)

// Branch into multiple paths
reads_ch.branch {
    small: it[1][0].size() < 1000000
    large: it[1][0].size() >= 1000000
}
</pre>

<strong>Benefits:</strong>
<ul>
<li>Complex data routing and transformation</li>
<li>Conditional processing based on metadata</li>
<li>Efficient memory usage with streaming</li>
<li>Parallel processing of different data types</li>
</ul>
        `
    },
    caching: {
        title: "💾 Intelligent Caching & Resume",
        content: `
<strong>Never lose work again with smart caching:</strong>

<pre style="background: #f5f5f5; padding: 15px; border-radius: 5px;">
// Enable caching in nextflow.config
process {
    cache = 'lenient'  // or 'strict', 'deep'

    withName: EXPENSIVE_PROCESS {
        cache = 'deep'  // Hash all inputs deeply
    }
}

// Resume failed runs
nextflow run main.nf -resume

// Clean specific cache
nextflow clean -f [run_name]

// Cache strategies
process ANALYSIS {
    cache 'deep'  // Hash file contents

    input:
    path input_file

    script:
    """
    # This will only re-run if input_file content changes
    expensive_analysis.py ${input_file}
    """
}
</pre>

<strong>Cache Strategies:</strong>
<ul>
<li><strong>standard:</strong> Hash file path and size (default)</li>
<li><strong>lenient:</strong> Hash only file path</li>
<li><strong>deep:</strong> Hash file contents (slower but safer)</li>
</ul>

<strong>Benefits:</strong>
<ul>
<li>Resume from any failed step</li>
<li>Skip unchanged processes automatically</li>
<li>Massive time savings during development</li>
<li>Safe iterative pipeline development</li>
</ul>
        `
    },
    error: {
        title: "🛡️ Error Handling & Retry Logic",
        content: `
<strong>Build resilient pipelines that handle failures gracefully:</strong>

<pre style="background: #f5f5f5; padding: 15px; border-radius: 5px;">
process ROBUST_ANALYSIS {
    errorStrategy 'retry'
    maxRetries 3

    // Dynamic resource allocation on retry
    memory { 4.GB * task.attempt }
    time { 2.h * task.attempt }

    input:
    tuple val(meta), path(reads)

    output:
    tuple val(meta), path("*.results"), emit: results

    script:
    """
    # Attempt analysis with current resources
    analysis_tool --memory ${task.memory.toGiga()}G ${reads}
    """
}

// Global error strategies
process {
    errorStrategy = { task.exitStatus in [143,137,104,134,139] ? 'retry' : 'finish' }
    maxRetries = 1
    maxErrors = '-1'
}

// Conditional error handling
process CONDITIONAL_RETRY {
    errorStrategy { task.attempt <= 2 ? 'retry' : 'ignore' }

    script:
    """
    if [ ${task.attempt} -gt 1 ]; then
        echo "Retry attempt ${task.attempt}"
        # Use alternative method
        alternative_tool input.fastq
    else
        # Try primary method first
        primary_tool input.fastq
    fi
    """
}
</pre>

<strong>Error Strategies:</strong>
<ul>
<li><strong>terminate:</strong> Stop entire pipeline (default)</li>
<li><strong>finish:</strong> Complete other tasks, then stop</li>
<li><strong>ignore:</strong> Continue pipeline, skip failed task</li>
<li><strong>retry:</strong> Retry with more resources</li>
</ul>
        `
    },
    resources: {
        title: "⚡ Dynamic Resource Allocation",
        content: `
<strong>Optimize resource usage for maximum efficiency:</strong>

<pre style="background: #f5f5f5; padding: 15px; border-radius: 5px;">
// Dynamic allocation based on input size
process ADAPTIVE_ASSEMBLY {
    cpus { Math.min(16, reads.size() > 1000000000 ? 16 : 8) }
    memory { reads.size() > 1000000000 ? '32.GB' : '16.GB' }
    time { reads.size() > 1000000000 ? '8.h' : '4.h' }

    input:
    tuple val(meta), path(reads)

    script:
    def mem_gb = task.memory.toGiga()
    """
    spades.py \\
        --threads ${task.cpus} \\
        --memory ${mem_gb} \\
        -1 ${reads[0]} \\
        -2 ${reads[1]} \\
        -o assembly
    """
}

// Resource labels for different process types
process {
    withLabel: process_low {
        cpus = 2
        memory = 4.GB
        time = 1.h
    }

    withLabel: process_medium {
        cpus = 8
        memory = 16.GB
        time = 4.h
    }

    withLabel: process_high {
        cpus = 16
        memory = 64.GB
        time = 12.h
    }
}

// Environment-specific resources
profiles {
    laptop {
        process.cpus = 4
        process.memory = '8.GB'
    }

    hpc {
        process.cpus = 32
        process.memory = '128.GB'
        process.queue = 'batch'
    }

    cloud {
        process.cpus = 64
        process.memory = '256.GB'
        aws.batch.cliPath = '/usr/local/bin/aws'
    }
}
</pre>

<strong>Benefits:</strong>
<ul>
<li>Automatic scaling based on data size</li>
<li>Efficient resource utilization</li>
<li>Platform-specific optimization</li>
<li>Cost reduction in cloud environments</li>
</ul>
        `
    },
    monitoring: {
        title: "📊 Pipeline Monitoring & Reporting",
        content: `
<strong>Track performance and generate comprehensive reports:</strong>

<pre style="background: #f5f5f5; padding: 15px; border-radius: 5px;">
// Enable comprehensive reporting
nextflow.config:
timeline {
    enabled = true
    file = "${params.outdir}/timeline.html"
}

report {
    enabled = true
    file = "${params.outdir}/report.html"
}

trace {
    enabled = true
    file = "${params.outdir}/trace.txt"
    fields = 'task_id,hash,native_id,process,tag,name,status,exit,module,container,cpus,time,disk,memory,attempt,submit,start,complete,duration,realtime,queue,%cpu,%mem,rss,vmem,peak_rss,peak_vmem,rchar,wchar,syscr,syscw,read_bytes,write_bytes'
}

dag {
    enabled = true
    file = "${params.outdir}/dag.html"
}

// Custom notifications
workflow.onComplete {
    def msg = """\
        Pipeline execution summary
        ---------------------------
        Completed at: ${workflow.complete}
        Duration    : ${workflow.duration}
        Success     : ${workflow.success}
        workDir     : ${workflow.workDir}
        exit status : ${workflow.exitStatus}
        """.stripIndent()

    sendMail(to: params.email, subject: 'Pipeline Completed', body: msg)
}

// Real-time monitoring with Nextflow Tower
tower {
    accessToken = 'your-tower-token'
    enabled = true
}
</pre>

<strong>Generated Reports:</strong>
<ul>
<li><strong>Timeline:</strong> Visual execution timeline</li>
<li><strong>Report:</strong> Resource usage statistics</li>
<li><strong>Trace:</strong> Detailed process metrics</li>
<li><strong>DAG:</strong> Workflow dependency graph</li>
</ul>

<strong>Monitoring Options:</strong>
<ul>
<li>Real-time tracking with Nextflow Tower</li>
<li>Email notifications on completion</li>
<li>Slack/Teams integration</li>
<li>Custom webhook notifications</li>
</ul>
        `
    }
};

document.querySelectorAll('.feature-btn').forEach(btn => {
    btn.addEventListener('click', function() {
        const feature = this.dataset.feature;
        const featureData = advancedFeatures[feature];

        // Reset all buttons
        document.querySelectorAll('.feature-btn').forEach(b => {
            b.style.opacity = '0.7';
        });

        // Highlight selected button
        this.style.opacity = '1';

        // Show feature
        document.getElementById('feature-content').innerHTML =
            '<h5>' + featureData.title + '</5>' + featureData.content;
        document.getElementById('feature-display').style.display = 'block';
    });
});
</script> <h3 id="exercise-4-advanced-pipeline-optimization-45-minutes">Exercise 4: Advanced Pipeline Optimization (45 minutes)<a class="headerlink" href="#exercise-4-advanced-pipeline-optimization-45-minutes" title="Permanent link">¶</a></h3> <p><strong>Objective</strong>: Implement advanced features to create a production-ready pipeline</p> <div id="advanced-exercise-tracker" style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin: 20px 0;"> <h4>🎯 Advanced Exercise Progress</h4> <p>Complete these advanced pipeline development tasks:</p> <div class="advanced-exercise-item" style="margin: 15px 0; padding: 15px; border-left: 4px solid #ddd; background: white;"> <label style="display: flex; align-items: center;"> <input type="checkbox" class="advanced-checkbox" data-exercise="caching" style="margin-right: 10px;"> <div> <strong>Task 1: Implement Smart Caching</strong> <div style="font-size: 0.9em; color: #666; margin-top: 5px;"> Add cache strategies and resume functionality to your pipeline </div> </div> </label> <div class="advanced-details" style="margin-top: 10px; display: none;"> <div style="background: #e8f5e8; padding: 10px; border-radius: 5px;"> ✅ <strong>Completed!</strong> Your pipeline now supports intelligent caching and resume. </div> </div> </div> <div class="advanced-exercise-item" style="margin: 15px 0; padding: 15px; border-left: 4px solid #ddd; background: white;"> <label style="display: flex; align-items: center;"> <input type="checkbox" class="advanced-checkbox" data-exercise="error" style="margin-right: 10px;"> <div> <strong>Task 2: Add Error Handling</strong> <div style="font-size: 0.9em; color: #666; margin-top: 5px;"> Implement retry logic and graceful error recovery </div> </div> </label> <div class="advanced-details" style="margin-top: 10px; display: none;"> <div style="background: #e8f5e8; padding: 10px; border-radius: 5px;"> ✅ <strong>Completed!</strong> Your pipeline now handles failures gracefully. </div> </div> </div> <div class="advanced-exercise-item" style="margin: 15px 0; padding: 15px; border-left: 4px solid #ddd; background: white;"> <label style="display: flex; align-items: center;"> <input type="checkbox" class="advanced-checkbox" data-exercise="resources" style="margin-right: 10px;"> <div> <strong>Task 3: Dynamic Resource Allocation</strong> <div style="font-size: 0.9em; color: #666; margin-top: 5px;"> Configure adaptive resource usage based on data size </div> </div> </label> <div class="advanced-details" style="margin-top: 10px; display: none;"> <div style="background: #e8f5e8; padding: 10px; border-radius: 5px;"> ✅ <strong>Completed!</strong> Your pipeline optimizes resources automatically. </div> </div> </div> <div class="advanced-exercise-item" style="margin: 15px 0; padding: 15px; border-left: 4px solid #ddd; background: white;"> <label style="display: flex; align-items: center;"> <input type="checkbox" class="advanced-checkbox" data-exercise="monitoring" style="margin-right: 10px;"> <div> <strong>Task 4: Enable Comprehensive Monitoring</strong> <div style="font-size: 0.9em; color: #666; margin-top: 5px;"> Add timeline, reports, and notification systems </div> </div> </label> <div class="advanced-details" style="margin-top: 10px; display: none;"> <div style="background: #e8f5e8; padding: 10px; border-radius: 5px;"> ✅ <strong>Completed!</strong> Your pipeline provides comprehensive monitoring. </div> </div> </div> <div class="advanced-exercise-item" style="margin: 15px 0; padding: 15px; border-left: 4px solid #ddd; background: white;"> <label style="display: flex; align-items: center;"> <input type="checkbox" class="advanced-checkbox" data-exercise="deployment" style="margin-right: 10px;"> <div> <strong>Task 5: Multi-Platform Deployment</strong> <div style="font-size: 0.9em; color: #666; margin-top: 5px;"> Create profiles for local, HPC, and cloud execution </div> </div> </label> <div class="advanced-details" style="margin-top: 10px; display: none;"> <div style="background: #e8f5e8; padding: 10px; border-radius: 5px;"> ✅ <strong>Completed!</strong> Your pipeline runs anywhere from laptop to cloud. </div> </div> </div> <div id="advanced-progress" style="margin-top: 20px;"> <div style="background: #e0e0e0; border-radius: 10px; height: 25px; overflow: hidden;"> <div id="advanced-progress-bar" style="background: linear-gradient(90deg, #ff9800, #ffc107); height: 100%; width: 0%; transition: width 0.3s ease; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold; font-size: 0.9em;"></div> </div> <p id="advanced-progress-text" style="text-align: center; margin-top: 10px; font-weight: bold;">Advanced Features: 0/5 implemented</p> </div> <div id="advanced-complete" style="display: none; background: #d4edda; color: #155724; padding: 20px; border-radius: 5px; margin-top: 15px; text-align: center;"> 🚀 <strong>Outstanding!</strong> You've built a production-ready pipeline! <br><br> <strong>Your pipeline now features:</strong> <ul style="text-align: left; margin-top: 10px;"> <li>Professional modular architecture</li> <li>Intelligent caching and resume capabilities</li> <li>Robust error handling and recovery</li> <li>Dynamic resource optimization</li> <li>Comprehensive monitoring and reporting</li> <li>Multi-platform deployment support</li> </ul> <br> <strong>🎓 You're now ready to lead bioinformatics pipeline development!</strong> </div> </div> <script>
function updateAdvancedProgress() {
    const checkboxes = document.querySelectorAll('.advanced-checkbox');
    const checked = document.querySelectorAll('.advanced-checkbox:checked').length;
    const total = checkboxes.length;
    const percentage = (checked / total) * 100;

    document.getElementById('advanced-progress-bar').style.width = percentage + '%';
    document.getElementById('advanced-progress-bar').textContent = percentage > 0 ? Math.round(percentage) + '%' : '';
    document.getElementById('advanced-progress-text').textContent = `Advanced Features: ${checked}/${total} implemented`;

    if (checked === total) {
        document.getElementById('advanced-complete').style.display = 'block';
    } else {
        document.getElementById('advanced-complete').style.display = 'none';
    }
}

document.querySelectorAll('.advanced-checkbox').forEach(checkbox => {
    checkbox.addEventListener('change', function() {
        const exerciseItem = this.closest('.advanced-exercise-item');
        const details = exerciseItem.querySelector('.advanced-details');

        if (this.checked) {
            exerciseItem.style.borderLeftColor = '#4caf50';
            details.style.display = 'block';
        } else {
            exerciseItem.style.borderLeftColor = '#ddd';
            details.style.display = 'none';
        }

        updateAdvancedProgress();
    });
});
</script> <div class="language-text highlight"><pre><span></span><code><span id="__span-20-1"><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a>## Part 2: Genome Assembly Workflows
</span><span id="__span-20-2"><a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a>
</span><span id="__span-20-3"><a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a>### De Novo Assembly Pipeline Development
</span><span id="__span-20-4"><a id="__codelineno-20-4" name="__codelineno-20-4" href="#__codelineno-20-4"></a>
</span><span id="__span-20-5"><a id="__codelineno-20-5" name="__codelineno-20-5" href="#__codelineno-20-5"></a>Genome assembly is crucial for discovering new variants, understanding genome structure, and analyzing organisms without reference genomes.
</span><span id="__span-20-6"><a id="__codelineno-20-6" name="__codelineno-20-6" href="#__codelineno-20-6"></a>
</span><span id="__span-20-7"><a id="__codelineno-20-7" name="__codelineno-20-7" href="#__codelineno-20-7"></a>### Exercise 3: Bacterial Genome Assembly Pipeline (45 minutes)
</span><span id="__span-20-8"><a id="__codelineno-20-8" name="__codelineno-20-8" href="#__codelineno-20-8"></a>
</span><span id="__span-20-9"><a id="__codelineno-20-9" name="__codelineno-20-9" href="#__codelineno-20-9"></a>**Objective**: Build a complete de novo assembly workflow
</span><span id="__span-20-10"><a id="__codelineno-20-10" name="__codelineno-20-10" href="#__codelineno-20-10"></a>
</span><span id="__span-20-11"><a id="__codelineno-20-11" name="__codelineno-20-11" href="#__codelineno-20-11"></a>Create `genome_assembly.nf`:
</span><span id="__span-20-12"><a id="__codelineno-20-12" name="__codelineno-20-12" href="#__codelineno-20-12"></a>
</span><span id="__span-20-13"><a id="__codelineno-20-13" name="__codelineno-20-13" href="#__codelineno-20-13"></a>```nextflow
</span><span id="__span-20-14"><a id="__codelineno-20-14" name="__codelineno-20-14" href="#__codelineno-20-14"></a>#!/usr/bin/env nextflow
</span><span id="__span-20-15"><a id="__codelineno-20-15" name="__codelineno-20-15" href="#__codelineno-20-15"></a>
</span><span id="__span-20-16"><a id="__codelineno-20-16" name="__codelineno-20-16" href="#__codelineno-20-16"></a>nextflow.enable.dsl=2
</span><span id="__span-20-17"><a id="__codelineno-20-17" name="__codelineno-20-17" href="#__codelineno-20-17"></a>
</span><span id="__span-20-18"><a id="__codelineno-20-18" name="__codelineno-20-18" href="#__codelineno-20-18"></a>// Process definitions
</span><span id="__span-20-19"><a id="__codelineno-20-19" name="__codelineno-20-19" href="#__codelineno-20-19"></a>process FASTQC {
</span><span id="__span-20-20"><a id="__codelineno-20-20" name="__codelineno-20-20" href="#__codelineno-20-20"></a>    tag "$sample_id"
</span><span id="__span-20-21"><a id="__codelineno-20-21" name="__codelineno-20-21" href="#__codelineno-20-21"></a>    container 'biocontainers/fastqc:v0.11.9_cv8'
</span><span id="__span-20-22"><a id="__codelineno-20-22" name="__codelineno-20-22" href="#__codelineno-20-22"></a>
</span><span id="__span-20-23"><a id="__codelineno-20-23" name="__codelineno-20-23" href="#__codelineno-20-23"></a>    input:
</span><span id="__span-20-24"><a id="__codelineno-20-24" name="__codelineno-20-24" href="#__codelineno-20-24"></a>    tuple val(sample_id), path(reads)
</span><span id="__span-20-25"><a id="__codelineno-20-25" name="__codelineno-20-25" href="#__codelineno-20-25"></a>
</span><span id="__span-20-26"><a id="__codelineno-20-26" name="__codelineno-20-26" href="#__codelineno-20-26"></a>    output:
</span><span id="__span-20-27"><a id="__codelineno-20-27" name="__codelineno-20-27" href="#__codelineno-20-27"></a>    tuple val(sample_id), path("*_fastqc.{html,zip}")
</span><span id="__span-20-28"><a id="__codelineno-20-28" name="__codelineno-20-28" href="#__codelineno-20-28"></a>
</span><span id="__span-20-29"><a id="__codelineno-20-29" name="__codelineno-20-29" href="#__codelineno-20-29"></a>    script:
</span><span id="__span-20-30"><a id="__codelineno-20-30" name="__codelineno-20-30" href="#__codelineno-20-30"></a>    """
</span><span id="__span-20-31"><a id="__codelineno-20-31" name="__codelineno-20-31" href="#__codelineno-20-31"></a>    fastqc ${reads}
</span><span id="__span-20-32"><a id="__codelineno-20-32" name="__codelineno-20-32" href="#__codelineno-20-32"></a>    """
</span><span id="__span-20-33"><a id="__codelineno-20-33" name="__codelineno-20-33" href="#__codelineno-20-33"></a>}
</span><span id="__span-20-34"><a id="__codelineno-20-34" name="__codelineno-20-34" href="#__codelineno-20-34"></a>
</span><span id="__span-20-35"><a id="__codelineno-20-35" name="__codelineno-20-35" href="#__codelineno-20-35"></a>process TRIMMOMATIC {
</span><span id="__span-20-36"><a id="__codelineno-20-36" name="__codelineno-20-36" href="#__codelineno-20-36"></a>    tag "$sample_id"
</span><span id="__span-20-37"><a id="__codelineno-20-37" name="__codelineno-20-37" href="#__codelineno-20-37"></a>    container 'biocontainers/trimmomatic:v0.39-1'
</span><span id="__span-20-38"><a id="__codelineno-20-38" name="__codelineno-20-38" href="#__codelineno-20-38"></a>
</span><span id="__span-20-39"><a id="__codelineno-20-39" name="__codelineno-20-39" href="#__codelineno-20-39"></a>    input:
</span><span id="__span-20-40"><a id="__codelineno-20-40" name="__codelineno-20-40" href="#__codelineno-20-40"></a>    tuple val(sample_id), path(reads)
</span><span id="__span-20-41"><a id="__codelineno-20-41" name="__codelineno-20-41" href="#__codelineno-20-41"></a>
</span><span id="__span-20-42"><a id="__codelineno-20-42" name="__codelineno-20-42" href="#__codelineno-20-42"></a>    output:
</span><span id="__span-20-43"><a id="__codelineno-20-43" name="__codelineno-20-43" href="#__codelineno-20-43"></a>    tuple val(sample_id), path("*_paired.fastq.gz")
</span><span id="__span-20-44"><a id="__codelineno-20-44" name="__codelineno-20-44" href="#__codelineno-20-44"></a>
</span><span id="__span-20-45"><a id="__codelineno-20-45" name="__codelineno-20-45" href="#__codelineno-20-45"></a>    script:
</span><span id="__span-20-46"><a id="__codelineno-20-46" name="__codelineno-20-46" href="#__codelineno-20-46"></a>    """
</span><span id="__span-20-47"><a id="__codelineno-20-47" name="__codelineno-20-47" href="#__codelineno-20-47"></a>    trimmomatic PE ${reads[0]} ${reads[1]} \
</span><span id="__span-20-48"><a id="__codelineno-20-48" name="__codelineno-20-48" href="#__codelineno-20-48"></a>        ${sample_id}_R1_paired.fastq.gz ${sample_id}_R1_unpaired.fastq.gz \
</span><span id="__span-20-49"><a id="__codelineno-20-49" name="__codelineno-20-49" href="#__codelineno-20-49"></a>        ${sample_id}_R2_paired.fastq.gz ${sample_id}_R2_unpaired.fastq.gz \
</span><span id="__span-20-50"><a id="__codelineno-20-50" name="__codelineno-20-50" href="#__codelineno-20-50"></a>        ILLUMINACLIP:adapters.fa:2:30:10 LEADING:3 TRAILING:3 SLIDINGWINDOW:4:15 MINLEN:36
</span><span id="__span-20-51"><a id="__codelineno-20-51" name="__codelineno-20-51" href="#__codelineno-20-51"></a>    """
</span><span id="__span-20-52"><a id="__codelineno-20-52" name="__codelineno-20-52" href="#__codelineno-20-52"></a>}
</span><span id="__span-20-53"><a id="__codelineno-20-53" name="__codelineno-20-53" href="#__codelineno-20-53"></a>
</span><span id="__span-20-54"><a id="__codelineno-20-54" name="__codelineno-20-54" href="#__codelineno-20-54"></a>process SPADES {
</span><span id="__span-20-55"><a id="__codelineno-20-55" name="__codelineno-20-55" href="#__codelineno-20-55"></a>    tag "$sample_id"
</span><span id="__span-20-56"><a id="__codelineno-20-56" name="__codelineno-20-56" href="#__codelineno-20-56"></a>    container 'biocontainers/spades:v3.15.3-1'
</span><span id="__span-20-57"><a id="__codelineno-20-57" name="__codelineno-20-57" href="#__codelineno-20-57"></a>
</span><span id="__span-20-58"><a id="__codelineno-20-58" name="__codelineno-20-58" href="#__codelineno-20-58"></a>    input:
</span><span id="__span-20-59"><a id="__codelineno-20-59" name="__codelineno-20-59" href="#__codelineno-20-59"></a>    tuple val(sample_id), path(reads)
</span><span id="__span-20-60"><a id="__codelineno-20-60" name="__codelineno-20-60" href="#__codelineno-20-60"></a>
</span><span id="__span-20-61"><a id="__codelineno-20-61" name="__codelineno-20-61" href="#__codelineno-20-61"></a>    output:
</span><span id="__span-20-62"><a id="__codelineno-20-62" name="__codelineno-20-62" href="#__codelineno-20-62"></a>    tuple val(sample_id), path("${sample_id}_assembly.fasta")
</span><span id="__span-20-63"><a id="__codelineno-20-63" name="__codelineno-20-63" href="#__codelineno-20-63"></a>
</span><span id="__span-20-64"><a id="__codelineno-20-64" name="__codelineno-20-64" href="#__codelineno-20-64"></a>    script:
</span><span id="__span-20-65"><a id="__codelineno-20-65" name="__codelineno-20-65" href="#__codelineno-20-65"></a>    """
</span><span id="__span-20-66"><a id="__codelineno-20-66" name="__codelineno-20-66" href="#__codelineno-20-66"></a>    spades.py --careful -1 ${reads[0]} -2 ${reads[1]} -o spades_output
</span><span id="__span-20-67"><a id="__codelineno-20-67" name="__codelineno-20-67" href="#__codelineno-20-67"></a>    cp spades_output/scaffolds.fasta ${sample_id}_assembly.fasta
</span><span id="__span-20-68"><a id="__codelineno-20-68" name="__codelineno-20-68" href="#__codelineno-20-68"></a>    """
</span><span id="__span-20-69"><a id="__codelineno-20-69" name="__codelineno-20-69" href="#__codelineno-20-69"></a>}
</span><span id="__span-20-70"><a id="__codelineno-20-70" name="__codelineno-20-70" href="#__codelineno-20-70"></a>
</span><span id="__span-20-71"><a id="__codelineno-20-71" name="__codelineno-20-71" href="#__codelineno-20-71"></a>process QUAST {
</span><span id="__span-20-72"><a id="__codelineno-20-72" name="__codelineno-20-72" href="#__codelineno-20-72"></a>    tag "$sample_id"
</span><span id="__span-20-73"><a id="__codelineno-20-73" name="__codelineno-20-73" href="#__codelineno-20-73"></a>    container 'biocontainers/quast:v5.0.2-1'
</span><span id="__span-20-74"><a id="__codelineno-20-74" name="__codelineno-20-74" href="#__codelineno-20-74"></a>    publishDir "${params.outdir}/quast", mode: 'copy'
</span><span id="__span-20-75"><a id="__codelineno-20-75" name="__codelineno-20-75" href="#__codelineno-20-75"></a>
</span><span id="__span-20-76"><a id="__codelineno-20-76" name="__codelineno-20-76" href="#__codelineno-20-76"></a>    input:
</span><span id="__span-20-77"><a id="__codelineno-20-77" name="__codelineno-20-77" href="#__codelineno-20-77"></a>    tuple val(sample_id), path(assembly)
</span><span id="__span-20-78"><a id="__codelineno-20-78" name="__codelineno-20-78" href="#__codelineno-20-78"></a>
</span><span id="__span-20-79"><a id="__codelineno-20-79" name="__codelineno-20-79" href="#__codelineno-20-79"></a>    output:
</span><span id="__span-20-80"><a id="__codelineno-20-80" name="__codelineno-20-80" href="#__codelineno-20-80"></a>    path "${sample_id}_quast"
</span><span id="__span-20-81"><a id="__codelineno-20-81" name="__codelineno-20-81" href="#__codelineno-20-81"></a>
</span><span id="__span-20-82"><a id="__codelineno-20-82" name="__codelineno-20-82" href="#__codelineno-20-82"></a>    script:
</span><span id="__span-20-83"><a id="__codelineno-20-83" name="__codelineno-20-83" href="#__codelineno-20-83"></a>    """
</span><span id="__span-20-84"><a id="__codelineno-20-84" name="__codelineno-20-84" href="#__codelineno-20-84"></a>    quast.py ${assembly} -o ${sample_id}_quast
</span><span id="__span-20-85"><a id="__codelineno-20-85" name="__codelineno-20-85" href="#__codelineno-20-85"></a>    """
</span><span id="__span-20-86"><a id="__codelineno-20-86" name="__codelineno-20-86" href="#__codelineno-20-86"></a>}
</span><span id="__span-20-87"><a id="__codelineno-20-87" name="__codelineno-20-87" href="#__codelineno-20-87"></a>
</span><span id="__span-20-88"><a id="__codelineno-20-88" name="__codelineno-20-88" href="#__codelineno-20-88"></a>process PROKKA {
</span><span id="__span-20-89"><a id="__codelineno-20-89" name="__codelineno-20-89" href="#__codelineno-20-89"></a>    tag "$sample_id"
</span><span id="__span-20-90"><a id="__codelineno-20-90" name="__codelineno-20-90" href="#__codelineno-20-90"></a>    container 'biocontainers/prokka:v1.14.6-1'
</span><span id="__span-20-91"><a id="__codelineno-20-91" name="__codelineno-20-91" href="#__codelineno-20-91"></a>    publishDir "${params.outdir}/annotations", mode: 'copy'
</span><span id="__span-20-92"><a id="__codelineno-20-92" name="__codelineno-20-92" href="#__codelineno-20-92"></a>
</span><span id="__span-20-93"><a id="__codelineno-20-93" name="__codelineno-20-93" href="#__codelineno-20-93"></a>    input:
</span><span id="__span-20-94"><a id="__codelineno-20-94" name="__codelineno-20-94" href="#__codelineno-20-94"></a>    tuple val(sample_id), path(assembly)
</span><span id="__span-20-95"><a id="__codelineno-20-95" name="__codelineno-20-95" href="#__codelineno-20-95"></a>
</span><span id="__span-20-96"><a id="__codelineno-20-96" name="__codelineno-20-96" href="#__codelineno-20-96"></a>    output:
</span><span id="__span-20-97"><a id="__codelineno-20-97" name="__codelineno-20-97" href="#__codelineno-20-97"></a>    path "${sample_id}_annotation"
</span><span id="__span-20-98"><a id="__codelineno-20-98" name="__codelineno-20-98" href="#__codelineno-20-98"></a>
</span><span id="__span-20-99"><a id="__codelineno-20-99" name="__codelineno-20-99" href="#__codelineno-20-99"></a>    script:
</span><span id="__span-20-100"><a id="__codelineno-20-100" name="__codelineno-20-100" href="#__codelineno-20-100"></a>    """
</span><span id="__span-20-101"><a id="__codelineno-20-101" name="__codelineno-20-101" href="#__codelineno-20-101"></a>    prokka ${assembly} --outdir ${sample_id}_annotation --prefix ${sample_id} \
</span><span id="__span-20-102"><a id="__codelineno-20-102" name="__codelineno-20-102" href="#__codelineno-20-102"></a>        --kingdom Bacteria --cpus ${task.cpus}
</span><span id="__span-20-103"><a id="__codelineno-20-103" name="__codelineno-20-103" href="#__codelineno-20-103"></a>    """
</span><span id="__span-20-104"><a id="__codelineno-20-104" name="__codelineno-20-104" href="#__codelineno-20-104"></a>}
</span><span id="__span-20-105"><a id="__codelineno-20-105" name="__codelineno-20-105" href="#__codelineno-20-105"></a>
</span><span id="__span-20-106"><a id="__codelineno-20-106" name="__codelineno-20-106" href="#__codelineno-20-106"></a>// Workflow definition
</span><span id="__span-20-107"><a id="__codelineno-20-107" name="__codelineno-20-107" href="#__codelineno-20-107"></a>workflow {
</span><span id="__span-20-108"><a id="__codelineno-20-108" name="__codelineno-20-108" href="#__codelineno-20-108"></a>    // Input data
</span><span id="__span-20-109"><a id="__codelineno-20-109" name="__codelineno-20-109" href="#__codelineno-20-109"></a>    reads_ch = Channel.fromFilePairs(params.reads, checkIfExists: true)
</span><span id="__span-20-110"><a id="__codelineno-20-110" name="__codelineno-20-110" href="#__codelineno-20-110"></a>
</span><span id="__span-20-111"><a id="__codelineno-20-111" name="__codelineno-20-111" href="#__codelineno-20-111"></a>    // QC and trimming
</span><span id="__span-20-112"><a id="__codelineno-20-112" name="__codelineno-20-112" href="#__codelineno-20-112"></a>    FASTQC(reads_ch)
</span><span id="__span-20-113"><a id="__codelineno-20-113" name="__codelineno-20-113" href="#__codelineno-20-113"></a>    TRIMMOMATIC(reads_ch)
</span><span id="__span-20-114"><a id="__codelineno-20-114" name="__codelineno-20-114" href="#__codelineno-20-114"></a>
</span><span id="__span-20-115"><a id="__codelineno-20-115" name="__codelineno-20-115" href="#__codelineno-20-115"></a>    // Assembly
</span><span id="__span-20-116"><a id="__codelineno-20-116" name="__codelineno-20-116" href="#__codelineno-20-116"></a>    SPADES(TRIMMOMATIC.out)
</span><span id="__span-20-117"><a id="__codelineno-20-117" name="__codelineno-20-117" href="#__codelineno-20-117"></a>
</span><span id="__span-20-118"><a id="__codelineno-20-118" name="__codelineno-20-118" href="#__codelineno-20-118"></a>    // Quality assessment
</span><span id="__span-20-119"><a id="__codelineno-20-119" name="__codelineno-20-119" href="#__codelineno-20-119"></a>    QUAST(SPADES.out)
</span><span id="__span-20-120"><a id="__codelineno-20-120" name="__codelineno-20-120" href="#__codelineno-20-120"></a>
</span><span id="__span-20-121"><a id="__codelineno-20-121" name="__codelineno-20-121" href="#__codelineno-20-121"></a>    // Annotation
</span><span id="__span-20-122"><a id="__codelineno-20-122" name="__codelineno-20-122" href="#__codelineno-20-122"></a>    PROKKA(SPADES.out)
</span><span id="__span-20-123"><a id="__codelineno-20-123" name="__codelineno-20-123" href="#__codelineno-20-123"></a>}
</span></code></pre></div> <h2 id="part-3-advanced-topics-optimization-deployment">Part 3: Advanced Topics - Optimization &amp; Deployment<a class="headerlink" href="#part-3-advanced-topics-optimization-deployment" title="Permanent link">¶</a></h2> <h3 id="advanced-nextflow-features_1">Advanced Nextflow Features<a class="headerlink" href="#advanced-nextflow-features_1" title="Permanent link">¶</a></h3> <h4 id="modules-and-subworkflows">Modules and Subworkflows<a class="headerlink" href="#modules-and-subworkflows" title="Permanent link">¶</a></h4> <p>Nextflow modules allow you to organize code into reusable components:</p> <div class="language-text highlight"><pre><span></span><code><span id="__span-21-1"><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a>// modules/fastqc.nf
</span><span id="__span-21-2"><a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a>process FASTQC {
</span><span id="__span-21-3"><a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a>    tag "$meta.id"
</span><span id="__span-21-4"><a id="__codelineno-21-4" name="__codelineno-21-4" href="#__codelineno-21-4"></a>    container 'biocontainers/fastqc:v0.11.9_cv8'
</span><span id="__span-21-5"><a id="__codelineno-21-5" name="__codelineno-21-5" href="#__codelineno-21-5"></a>
</span><span id="__span-21-6"><a id="__codelineno-21-6" name="__codelineno-21-6" href="#__codelineno-21-6"></a>    input:
</span><span id="__span-21-7"><a id="__codelineno-21-7" name="__codelineno-21-7" href="#__codelineno-21-7"></a>    tuple val(meta), path(reads)
</span><span id="__span-21-8"><a id="__codelineno-21-8" name="__codelineno-21-8" href="#__codelineno-21-8"></a>
</span><span id="__span-21-9"><a id="__codelineno-21-9" name="__codelineno-21-9" href="#__codelineno-21-9"></a>    output:
</span><span id="__span-21-10"><a id="__codelineno-21-10" name="__codelineno-21-10" href="#__codelineno-21-10"></a>    tuple val(meta), path("*.html"), emit: html
</span><span id="__span-21-11"><a id="__codelineno-21-11" name="__codelineno-21-11" href="#__codelineno-21-11"></a>    tuple val(meta), path("*.zip") , emit: zip
</span><span id="__span-21-12"><a id="__codelineno-21-12" name="__codelineno-21-12" href="#__codelineno-21-12"></a>
</span><span id="__span-21-13"><a id="__codelineno-21-13" name="__codelineno-21-13" href="#__codelineno-21-13"></a>    script:
</span><span id="__span-21-14"><a id="__codelineno-21-14" name="__codelineno-21-14" href="#__codelineno-21-14"></a>    """
</span><span id="__span-21-15"><a id="__codelineno-21-15" name="__codelineno-21-15" href="#__codelineno-21-15"></a>    fastqc ${reads}
</span><span id="__span-21-16"><a id="__codelineno-21-16" name="__codelineno-21-16" href="#__codelineno-21-16"></a>    """
</span><span id="__span-21-17"><a id="__codelineno-21-17" name="__codelineno-21-17" href="#__codelineno-21-17"></a>}
</span></code></pre></div> <p>Include modules in your main workflow:</p> <div class="language-text highlight"><pre><span></span><code><span id="__span-22-1"><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a>// main.nf
</span><span id="__span-22-2"><a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a>include { FASTQC } from './modules/fastqc'
</span><span id="__span-22-3"><a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a>
</span><span id="__span-22-4"><a id="__codelineno-22-4" name="__codelineno-22-4" href="#__codelineno-22-4"></a>workflow {
</span><span id="__span-22-5"><a id="__codelineno-22-5" name="__codelineno-22-5" href="#__codelineno-22-5"></a>    reads_ch = Channel.fromFilePairs(params.reads)
</span><span id="__span-22-6"><a id="__codelineno-22-6" name="__codelineno-22-6" href="#__codelineno-22-6"></a>    FASTQC(reads_ch)
</span><span id="__span-22-7"><a id="__codelineno-22-7" name="__codelineno-22-7" href="#__codelineno-22-7"></a>}
</span></code></pre></div> <h4 id="advanced-channel-operators">Advanced Channel Operators<a class="headerlink" href="#advanced-channel-operators" title="Permanent link">¶</a></h4> <div class="language-text highlight"><pre><span></span><code><span id="__span-23-1"><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a>workflow {
</span><span id="__span-23-2"><a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a>    // Combine channels
</span><span id="__span-23-3"><a id="__codelineno-23-3" name="__codelineno-23-3" href="#__codelineno-23-3"></a>    reads_ch = Channel.fromFilePairs(params.reads)
</span><span id="__span-23-4"><a id="__codelineno-23-4" name="__codelineno-23-4" href="#__codelineno-23-4"></a>    reference_ch = Channel.fromPath(params.reference)
</span><span id="__span-23-5"><a id="__codelineno-23-5" name="__codelineno-23-5" href="#__codelineno-23-5"></a>
</span><span id="__span-23-6"><a id="__codelineno-23-6" name="__codelineno-23-6" href="#__codelineno-23-6"></a>    // Cross product - each read pair with each reference
</span><span id="__span-23-7"><a id="__codelineno-23-7" name="__codelineno-23-7" href="#__codelineno-23-7"></a>    combined_ch = reads_ch.combine(reference_ch)
</span><span id="__span-23-8"><a id="__codelineno-23-8" name="__codelineno-23-8" href="#__codelineno-23-8"></a>
</span><span id="__span-23-9"><a id="__codelineno-23-9" name="__codelineno-23-9" href="#__codelineno-23-9"></a>    // Join channels by key
</span><span id="__span-23-10"><a id="__codelineno-23-10" name="__codelineno-23-10" href="#__codelineno-23-10"></a>    metadata_ch = Channel.from([
</span><span id="__span-23-11"><a id="__codelineno-23-11" name="__codelineno-23-11" href="#__codelineno-23-11"></a>        ['sample1', 'lineage1'],
</span><span id="__span-23-12"><a id="__codelineno-23-12" name="__codelineno-23-12" href="#__codelineno-23-12"></a>        ['sample2', 'lineage2']
</span><span id="__span-23-13"><a id="__codelineno-23-13" name="__codelineno-23-13" href="#__codelineno-23-13"></a>    ])
</span><span id="__span-23-14"><a id="__codelineno-23-14" name="__codelineno-23-14" href="#__codelineno-23-14"></a>
</span><span id="__span-23-15"><a id="__codelineno-23-15" name="__codelineno-23-15" href="#__codelineno-23-15"></a>    reads_with_meta = reads_ch.join(metadata_ch)
</span><span id="__span-23-16"><a id="__codelineno-23-16" name="__codelineno-23-16" href="#__codelineno-23-16"></a>
</span><span id="__span-23-17"><a id="__codelineno-23-17" name="__codelineno-23-17" href="#__codelineno-23-17"></a>    // Filter channels
</span><span id="__span-23-18"><a id="__codelineno-23-18" name="__codelineno-23-18" href="#__codelineno-23-18"></a>    large_files = reads_ch.filter { sample, files -&gt;
</span><span id="__span-23-19"><a id="__codelineno-23-19" name="__codelineno-23-19" href="#__codelineno-23-19"></a>        files[0].size() &gt; 1000000
</span><span id="__span-23-20"><a id="__codelineno-23-20" name="__codelineno-23-20" href="#__codelineno-23-20"></a>    }
</span><span id="__span-23-21"><a id="__codelineno-23-21" name="__codelineno-23-21" href="#__codelineno-23-21"></a>
</span><span id="__span-23-22"><a id="__codelineno-23-22" name="__codelineno-23-22" href="#__codelineno-23-22"></a>    // Transform data
</span><span id="__span-23-23"><a id="__codelineno-23-23" name="__codelineno-23-23" href="#__codelineno-23-23"></a>    sample_names = reads_ch.map { sample, files -&gt; sample }
</span><span id="__span-23-24"><a id="__codelineno-23-24" name="__codelineno-23-24" href="#__codelineno-23-24"></a>}
</span></code></pre></div> <h3 id="exercise-4-performance-optimization-30-minutes">Exercise 4: Performance Optimization (30 minutes)<a class="headerlink" href="#exercise-4-performance-optimization-30-minutes" title="Permanent link">¶</a></h3> <p><strong>Objective</strong>: Optimize pipeline performance and resource usage</p> <p>Create <code>nextflow.config</code> with optimized settings:</p> <div class="language-groovy highlight"><pre><span></span><code><span id="__span-24-1"><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a><span class="c1">// nextflow.config</span>
</span><span id="__span-24-2"><a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a><span class="n">params</span><span class="w"> </span><span class="o">{</span>
</span><span id="__span-24-3"><a id="__codelineno-24-3" name="__codelineno-24-3" href="#__codelineno-24-3"></a><span class="w">    </span><span class="c1">// Input parameters</span>
</span><span id="__span-24-4"><a id="__codelineno-24-4" name="__codelineno-24-4" href="#__codelineno-24-4"></a><span class="w">    </span><span class="n">reads</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"data/*_R{1,2}.fastq.gz"</span>
</span><span id="__span-24-5"><a id="__codelineno-24-5" name="__codelineno-24-5" href="#__codelineno-24-5"></a><span class="w">    </span><span class="n">outdir</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"results"</span>
</span><span id="__span-24-6"><a id="__codelineno-24-6" name="__codelineno-24-6" href="#__codelineno-24-6"></a>
</span><span id="__span-24-7"><a id="__codelineno-24-7" name="__codelineno-24-7" href="#__codelineno-24-7"></a><span class="w">    </span><span class="c1">// Resource defaults</span>
</span><span id="__span-24-8"><a id="__codelineno-24-8" name="__codelineno-24-8" href="#__codelineno-24-8"></a><span class="w">    </span><span class="n">max_cpus</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">16</span>
</span><span id="__span-24-9"><a id="__codelineno-24-9" name="__codelineno-24-9" href="#__codelineno-24-9"></a><span class="w">    </span><span class="n">max_memory</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'64.GB'</span>
</span><span id="__span-24-10"><a id="__codelineno-24-10" name="__codelineno-24-10" href="#__codelineno-24-10"></a><span class="w">    </span><span class="n">max_time</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'24.h'</span>
</span><span id="__span-24-11"><a id="__codelineno-24-11" name="__codelineno-24-11" href="#__codelineno-24-11"></a><span class="o">}</span>
</span><span id="__span-24-12"><a id="__codelineno-24-12" name="__codelineno-24-12" href="#__codelineno-24-12"></a>
</span><span id="__span-24-13"><a id="__codelineno-24-13" name="__codelineno-24-13" href="#__codelineno-24-13"></a><span class="c1">// Profile configurations</span>
</span><span id="__span-24-14"><a id="__codelineno-24-14" name="__codelineno-24-14" href="#__codelineno-24-14"></a><span class="n">profiles</span><span class="w"> </span><span class="o">{</span>
</span><span id="__span-24-15"><a id="__codelineno-24-15" name="__codelineno-24-15" href="#__codelineno-24-15"></a><span class="w">    </span><span class="n">local</span><span class="w"> </span><span class="o">{</span>
</span><span id="__span-24-16"><a id="__codelineno-24-16" name="__codelineno-24-16" href="#__codelineno-24-16"></a><span class="w">        </span><span class="n">process</span><span class="o">.</span><span class="na">executor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'local'</span>
</span><span id="__span-24-17"><a id="__codelineno-24-17" name="__codelineno-24-17" href="#__codelineno-24-17"></a><span class="w">        </span><span class="n">process</span><span class="o">.</span><span class="na">cpus</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span>
</span><span id="__span-24-18"><a id="__codelineno-24-18" name="__codelineno-24-18" href="#__codelineno-24-18"></a><span class="w">        </span><span class="n">process</span><span class="o">.</span><span class="na">memory</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'8.GB'</span>
</span><span id="__span-24-19"><a id="__codelineno-24-19" name="__codelineno-24-19" href="#__codelineno-24-19"></a><span class="w">        </span><span class="n">docker</span><span class="o">.</span><span class="na">enabled</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
</span><span id="__span-24-20"><a id="__codelineno-24-20" name="__codelineno-24-20" href="#__codelineno-24-20"></a><span class="w">    </span><span class="o">}</span>
</span><span id="__span-24-21"><a id="__codelineno-24-21" name="__codelineno-24-21" href="#__codelineno-24-21"></a>
</span><span id="__span-24-22"><a id="__codelineno-24-22" name="__codelineno-24-22" href="#__codelineno-24-22"></a><span class="w">    </span><span class="n">slurm</span><span class="w"> </span><span class="o">{</span>
</span><span id="__span-24-23"><a id="__codelineno-24-23" name="__codelineno-24-23" href="#__codelineno-24-23"></a><span class="w">        </span><span class="n">process</span><span class="o">.</span><span class="na">executor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'slurm'</span>
</span><span id="__span-24-24"><a id="__codelineno-24-24" name="__codelineno-24-24" href="#__codelineno-24-24"></a><span class="w">        </span><span class="n">process</span><span class="o">.</span><span class="na">queue</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'batch'</span>
</span><span id="__span-24-25"><a id="__codelineno-24-25" name="__codelineno-24-25" href="#__codelineno-24-25"></a><span class="w">        </span><span class="n">process</span><span class="o">.</span><span class="na">cpus</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">16</span>
</span><span id="__span-24-26"><a id="__codelineno-24-26" name="__codelineno-24-26" href="#__codelineno-24-26"></a><span class="w">        </span><span class="n">process</span><span class="o">.</span><span class="na">memory</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'32.GB'</span>
</span><span id="__span-24-27"><a id="__codelineno-24-27" name="__codelineno-24-27" href="#__codelineno-24-27"></a><span class="w">        </span><span class="n">singularity</span><span class="o">.</span><span class="na">enabled</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
</span><span id="__span-24-28"><a id="__codelineno-24-28" name="__codelineno-24-28" href="#__codelineno-24-28"></a><span class="w">    </span><span class="o">}</span>
</span><span id="__span-24-29"><a id="__codelineno-24-29" name="__codelineno-24-29" href="#__codelineno-24-29"></a>
</span><span id="__span-24-30"><a id="__codelineno-24-30" name="__codelineno-24-30" href="#__codelineno-24-30"></a><span class="w">    </span><span class="n">cloud</span><span class="w"> </span><span class="o">{</span>
</span><span id="__span-24-31"><a id="__codelineno-24-31" name="__codelineno-24-31" href="#__codelineno-24-31"></a><span class="w">        </span><span class="n">process</span><span class="o">.</span><span class="na">executor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'awsbatch'</span>
</span><span id="__span-24-32"><a id="__codelineno-24-32" name="__codelineno-24-32" href="#__codelineno-24-32"></a><span class="w">        </span><span class="n">aws</span><span class="o">.</span><span class="na">batch</span><span class="o">.</span><span class="na">cliPath</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'/home/ec2-user/miniconda/bin/aws'</span>
</span><span id="__span-24-33"><a id="__codelineno-24-33" name="__codelineno-24-33" href="#__codelineno-24-33"></a><span class="w">        </span><span class="n">aws</span><span class="o">.</span><span class="na">region</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'us-west-2'</span>
</span><span id="__span-24-34"><a id="__codelineno-24-34" name="__codelineno-24-34" href="#__codelineno-24-34"></a><span class="w">    </span><span class="o">}</span>
</span><span id="__span-24-35"><a id="__codelineno-24-35" name="__codelineno-24-35" href="#__codelineno-24-35"></a><span class="o">}</span>
</span><span id="__span-24-36"><a id="__codelineno-24-36" name="__codelineno-24-36" href="#__codelineno-24-36"></a>
</span><span id="__span-24-37"><a id="__codelineno-24-37" name="__codelineno-24-37" href="#__codelineno-24-37"></a><span class="c1">// Process-specific resource allocation</span>
</span><span id="__span-24-38"><a id="__codelineno-24-38" name="__codelineno-24-38" href="#__codelineno-24-38"></a><span class="n">process</span><span class="w"> </span><span class="o">{</span>
</span><span id="__span-24-39"><a id="__codelineno-24-39" name="__codelineno-24-39" href="#__codelineno-24-39"></a><span class="w">    </span><span class="c1">// Default resources</span>
</span><span id="__span-24-40"><a id="__codelineno-24-40" name="__codelineno-24-40" href="#__codelineno-24-40"></a><span class="w">    </span><span class="n">cpus</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span>
</span><span id="__span-24-41"><a id="__codelineno-24-41" name="__codelineno-24-41" href="#__codelineno-24-41"></a><span class="w">    </span><span class="n">memory</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="o">.</span><span class="na">GB</span>
</span><span id="__span-24-42"><a id="__codelineno-24-42" name="__codelineno-24-42" href="#__codelineno-24-42"></a><span class="w">    </span><span class="n">time</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'1.hour'</span>
</span><span id="__span-24-43"><a id="__codelineno-24-43" name="__codelineno-24-43" href="#__codelineno-24-43"></a>
</span><span id="__span-24-44"><a id="__codelineno-24-44" name="__codelineno-24-44" href="#__codelineno-24-44"></a><span class="w">    </span><span class="c1">// Process-specific optimization</span>
</span><span id="__span-24-45"><a id="__codelineno-24-45" name="__codelineno-24-45" href="#__codelineno-24-45"></a><span class="w">    </span><span class="nl">withName:</span><span class="w"> </span><span class="n">SPADES</span><span class="w"> </span><span class="o">{</span>
</span><span id="__span-24-46"><a id="__codelineno-24-46" name="__codelineno-24-46" href="#__codelineno-24-46"></a><span class="w">        </span><span class="n">cpus</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="mi">8</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">task</span><span class="o">.</span><span class="na">attempt</span><span class="w"> </span><span class="o">}</span>
</span><span id="__span-24-47"><a id="__codelineno-24-47" name="__codelineno-24-47" href="#__codelineno-24-47"></a><span class="w">        </span><span class="n">memory</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="mi">16</span><span class="o">.</span><span class="na">GB</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">task</span><span class="o">.</span><span class="na">attempt</span><span class="w"> </span><span class="o">}</span>
</span><span id="__span-24-48"><a id="__codelineno-24-48" name="__codelineno-24-48" href="#__codelineno-24-48"></a><span class="w">        </span><span class="n">time</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="mi">4</span><span class="o">.</span><span class="na">hour</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">task</span><span class="o">.</span><span class="na">attempt</span><span class="w"> </span><span class="o">}</span>
</span><span id="__span-24-49"><a id="__codelineno-24-49" name="__codelineno-24-49" href="#__codelineno-24-49"></a><span class="w">        </span><span class="n">errorStrategy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'retry'</span>
</span><span id="__span-24-50"><a id="__codelineno-24-50" name="__codelineno-24-50" href="#__codelineno-24-50"></a><span class="w">        </span><span class="n">maxRetries</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span>
</span><span id="__span-24-51"><a id="__codelineno-24-51" name="__codelineno-24-51" href="#__codelineno-24-51"></a><span class="w">    </span><span class="o">}</span>
</span><span id="__span-24-52"><a id="__codelineno-24-52" name="__codelineno-24-52" href="#__codelineno-24-52"></a>
</span><span id="__span-24-53"><a id="__codelineno-24-53" name="__codelineno-24-53" href="#__codelineno-24-53"></a><span class="w">    </span><span class="nl">withName:</span><span class="w"> </span><span class="n">BWA_MEM</span><span class="w"> </span><span class="o">{</span>
</span><span id="__span-24-54"><a id="__codelineno-24-54" name="__codelineno-24-54" href="#__codelineno-24-54"></a><span class="w">        </span><span class="n">cpus</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">8</span>
</span><span id="__span-24-55"><a id="__codelineno-24-55" name="__codelineno-24-55" href="#__codelineno-24-55"></a><span class="w">        </span><span class="n">memory</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">16</span><span class="o">.</span><span class="na">GB</span>
</span><span id="__span-24-56"><a id="__codelineno-24-56" name="__codelineno-24-56" href="#__codelineno-24-56"></a><span class="w">        </span><span class="n">time</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="na">hour</span>
</span><span id="__span-24-57"><a id="__codelineno-24-57" name="__codelineno-24-57" href="#__codelineno-24-57"></a><span class="w">    </span><span class="o">}</span>
</span><span id="__span-24-58"><a id="__codelineno-24-58" name="__codelineno-24-58" href="#__codelineno-24-58"></a>
</span><span id="__span-24-59"><a id="__codelineno-24-59" name="__codelineno-24-59" href="#__codelineno-24-59"></a><span class="w">    </span><span class="nl">withName:</span><span class="w"> </span><span class="n">FASTQC</span><span class="w"> </span><span class="o">{</span>
</span><span id="__span-24-60"><a id="__codelineno-24-60" name="__codelineno-24-60" href="#__codelineno-24-60"></a><span class="w">        </span><span class="n">cpus</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span>
</span><span id="__span-24-61"><a id="__codelineno-24-61" name="__codelineno-24-61" href="#__codelineno-24-61"></a><span class="w">        </span><span class="n">memory</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="na">GB</span>
</span><span id="__span-24-62"><a id="__codelineno-24-62" name="__codelineno-24-62" href="#__codelineno-24-62"></a><span class="w">        </span><span class="n">time</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">30</span><span class="o">.</span><span class="na">min</span>
</span><span id="__span-24-63"><a id="__codelineno-24-63" name="__codelineno-24-63" href="#__codelineno-24-63"></a><span class="w">    </span><span class="o">}</span>
</span><span id="__span-24-64"><a id="__codelineno-24-64" name="__codelineno-24-64" href="#__codelineno-24-64"></a><span class="o">}</span>
</span></code></pre></div> <div class="language-groovy highlight"><pre><span></span><code><span id="__span-25-1"><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a><span class="c1">// nextflow.config</span>
</span><span id="__span-25-2"><a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a><span class="n">params</span><span class="w"> </span><span class="o">{</span>
</span><span id="__span-25-3"><a id="__codelineno-25-3" name="__codelineno-25-3" href="#__codelineno-25-3"></a><span class="w">    </span><span class="c1">// Input parameters</span>
</span><span id="__span-25-4"><a id="__codelineno-25-4" name="__codelineno-25-4" href="#__codelineno-25-4"></a><span class="w">    </span><span class="n">reads</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"data/*_R{1,2}_001.fastq.gz"</span>
</span><span id="__span-25-5"><a id="__codelineno-25-5" name="__codelineno-25-5" href="#__codelineno-25-5"></a><span class="w">    </span><span class="n">outdir</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"results"</span>
</span><span id="__span-25-6"><a id="__codelineno-25-6" name="__codelineno-25-6" href="#__codelineno-25-6"></a>
</span><span id="__span-25-7"><a id="__codelineno-25-7" name="__codelineno-25-7" href="#__codelineno-25-7"></a><span class="w">    </span><span class="c1">// Resource defaults</span>
</span><span id="__span-25-8"><a id="__codelineno-25-8" name="__codelineno-25-8" href="#__codelineno-25-8"></a><span class="w">    </span><span class="n">max_cpus</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">16</span>
</span><span id="__span-25-9"><a id="__codelineno-25-9" name="__codelineno-25-9" href="#__codelineno-25-9"></a><span class="w">    </span><span class="n">max_memory</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'64.GB'</span>
</span><span id="__span-25-10"><a id="__codelineno-25-10" name="__codelineno-25-10" href="#__codelineno-25-10"></a><span class="w">    </span><span class="n">max_time</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'24.h'</span>
</span><span id="__span-25-11"><a id="__codelineno-25-11" name="__codelineno-25-11" href="#__codelineno-25-11"></a><span class="o">}</span>
</span><span id="__span-25-12"><a id="__codelineno-25-12" name="__codelineno-25-12" href="#__codelineno-25-12"></a>
</span><span id="__span-25-13"><a id="__codelineno-25-13" name="__codelineno-25-13" href="#__codelineno-25-13"></a><span class="c1">// Profile configurations</span>
</span><span id="__span-25-14"><a id="__codelineno-25-14" name="__codelineno-25-14" href="#__codelineno-25-14"></a><span class="n">profiles</span><span class="w"> </span><span class="o">{</span>
</span><span id="__span-25-15"><a id="__codelineno-25-15" name="__codelineno-25-15" href="#__codelineno-25-15"></a><span class="w">    </span><span class="n">local</span><span class="w"> </span><span class="o">{</span>
</span><span id="__span-25-16"><a id="__codelineno-25-16" name="__codelineno-25-16" href="#__codelineno-25-16"></a><span class="w">        </span><span class="n">process</span><span class="o">.</span><span class="na">executor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'local'</span>
</span><span id="__span-25-17"><a id="__codelineno-25-17" name="__codelineno-25-17" href="#__codelineno-25-17"></a><span class="w">        </span><span class="n">process</span><span class="o">.</span><span class="na">cpus</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span>
</span><span id="__span-25-18"><a id="__codelineno-25-18" name="__codelineno-25-18" href="#__codelineno-25-18"></a><span class="w">        </span><span class="n">process</span><span class="o">.</span><span class="na">memory</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'8.GB'</span>
</span><span id="__span-25-19"><a id="__codelineno-25-19" name="__codelineno-25-19" href="#__codelineno-25-19"></a><span class="w">        </span><span class="n">docker</span><span class="o">.</span><span class="na">enabled</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
</span><span id="__span-25-20"><a id="__codelineno-25-20" name="__codelineno-25-20" href="#__codelineno-25-20"></a><span class="w">    </span><span class="o">}</span>
</span><span id="__span-25-21"><a id="__codelineno-25-21" name="__codelineno-25-21" href="#__codelineno-25-21"></a>
</span><span id="__span-25-22"><a id="__codelineno-25-22" name="__codelineno-25-22" href="#__codelineno-25-22"></a><span class="w">    </span><span class="n">slurm</span><span class="w"> </span><span class="o">{</span>
</span><span id="__span-25-23"><a id="__codelineno-25-23" name="__codelineno-25-23" href="#__codelineno-25-23"></a><span class="w">        </span><span class="n">process</span><span class="o">.</span><span class="na">executor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'slurm'</span>
</span><span id="__span-25-24"><a id="__codelineno-25-24" name="__codelineno-25-24" href="#__codelineno-25-24"></a><span class="w">        </span><span class="n">process</span><span class="o">.</span><span class="na">queue</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'batch'</span>
</span><span id="__span-25-25"><a id="__codelineno-25-25" name="__codelineno-25-25" href="#__codelineno-25-25"></a><span class="w">        </span><span class="n">process</span><span class="o">.</span><span class="na">cpus</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">16</span>
</span><span id="__span-25-26"><a id="__codelineno-25-26" name="__codelineno-25-26" href="#__codelineno-25-26"></a><span class="w">        </span><span class="n">process</span><span class="o">.</span><span class="na">memory</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'32.GB'</span>
</span><span id="__span-25-27"><a id="__codelineno-25-27" name="__codelineno-25-27" href="#__codelineno-25-27"></a><span class="w">        </span><span class="n">singularity</span><span class="o">.</span><span class="na">enabled</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
</span><span id="__span-25-28"><a id="__codelineno-25-28" name="__codelineno-25-28" href="#__codelineno-25-28"></a><span class="w">    </span><span class="o">}</span>
</span><span id="__span-25-29"><a id="__codelineno-25-29" name="__codelineno-25-29" href="#__codelineno-25-29"></a>
</span><span id="__span-25-30"><a id="__codelineno-25-30" name="__codelineno-25-30" href="#__codelineno-25-30"></a><span class="w">    </span><span class="n">conda</span><span class="w"> </span><span class="o">{</span>
</span><span id="__span-25-31"><a id="__codelineno-25-31" name="__codelineno-25-31" href="#__codelineno-25-31"></a><span class="w">        </span><span class="n">conda</span><span class="o">.</span><span class="na">enabled</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
</span><span id="__span-25-32"><a id="__codelineno-25-32" name="__codelineno-25-32" href="#__codelineno-25-32"></a><span class="w">        </span><span class="n">process</span><span class="o">.</span><span class="na">conda</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'envs/microbial_genomics.yml'</span>
</span><span id="__span-25-33"><a id="__codelineno-25-33" name="__codelineno-25-33" href="#__codelineno-25-33"></a><span class="w">    </span><span class="o">}</span>
</span><span id="__span-25-34"><a id="__codelineno-25-34" name="__codelineno-25-34" href="#__codelineno-25-34"></a><span class="o">}</span>
</span><span id="__span-25-35"><a id="__codelineno-25-35" name="__codelineno-25-35" href="#__codelineno-25-35"></a>
</span><span id="__span-25-36"><a id="__codelineno-25-36" name="__codelineno-25-36" href="#__codelineno-25-36"></a><span class="c1">// Process-specific configurations</span>
</span><span id="__span-25-37"><a id="__codelineno-25-37" name="__codelineno-25-37" href="#__codelineno-25-37"></a><span class="n">process</span><span class="w"> </span><span class="o">{</span>
</span><span id="__span-25-38"><a id="__codelineno-25-38" name="__codelineno-25-38" href="#__codelineno-25-38"></a><span class="w">    </span><span class="nl">withName:</span><span class="w"> </span><span class="n">SPADES</span><span class="w"> </span><span class="o">{</span>
</span><span id="__span-25-39"><a id="__codelineno-25-39" name="__codelineno-25-39" href="#__codelineno-25-39"></a><span class="w">        </span><span class="n">cpus</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">8</span>
</span><span id="__span-25-40"><a id="__codelineno-25-40" name="__codelineno-25-40" href="#__codelineno-25-40"></a><span class="w">        </span><span class="n">memory</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'16.GB'</span>
</span><span id="__span-25-41"><a id="__codelineno-25-41" name="__codelineno-25-41" href="#__codelineno-25-41"></a><span class="w">        </span><span class="n">time</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'4.h'</span>
</span><span id="__span-25-42"><a id="__codelineno-25-42" name="__codelineno-25-42" href="#__codelineno-25-42"></a><span class="w">    </span><span class="o">}</span>
</span><span id="__span-25-43"><a id="__codelineno-25-43" name="__codelineno-25-43" href="#__codelineno-25-43"></a>
</span><span id="__span-25-44"><a id="__codelineno-25-44" name="__codelineno-25-44" href="#__codelineno-25-44"></a><span class="w">    </span><span class="nl">withName:</span><span class="w"> </span><span class="n">PROKKA</span><span class="w"> </span><span class="o">{</span>
</span><span id="__span-25-45"><a id="__codelineno-25-45" name="__codelineno-25-45" href="#__codelineno-25-45"></a><span class="w">        </span><span class="n">cpus</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span>
</span><span id="__span-25-46"><a id="__codelineno-25-46" name="__codelineno-25-46" href="#__codelineno-25-46"></a><span class="w">        </span><span class="n">memory</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'8.GB'</span>
</span><span id="__span-25-47"><a id="__codelineno-25-47" name="__codelineno-25-47" href="#__codelineno-25-47"></a><span class="w">        </span><span class="n">time</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'2.h'</span>
</span><span id="__span-25-48"><a id="__codelineno-25-48" name="__codelineno-25-48" href="#__codelineno-25-48"></a><span class="w">    </span><span class="o">}</span>
</span><span id="__span-25-49"><a id="__codelineno-25-49" name="__codelineno-25-49" href="#__codelineno-25-49"></a><span class="o">}</span>
</span></code></pre></div> <h2 id="key-concepts">Key Concepts<a class="headerlink" href="#key-concepts" title="Permanent link">¶</a></h2> <h3 id="nextflow-language-features">Nextflow Language Features<a class="headerlink" href="#nextflow-language-features" title="Permanent link">¶</a></h3> <ul> <li><strong>Processes</strong>: Encapsulated tasks with inputs, outputs, and script</li> <li><strong>Channels</strong>: Asynchronous data streams connecting processes</li> <li><strong>Operators</strong>: Transform and manipulate channel data</li> <li><strong>Workflows</strong>: Orchestrate process execution and data flow</li> </ul> <h3 id="best-practices">Best Practices<a class="headerlink" href="#best-practices" title="Permanent link">¶</a></h3> <ul> <li><strong>Modularity</strong>: Break complex workflows into reusable components</li> <li><strong>Parameterization</strong>: Make pipelines configurable and flexible</li> <li><strong>Error handling</strong>: Implement robust error recovery mechanisms</li> <li><strong>Testing</strong>: Validate pipeline components and outputs</li> <li><strong>Documentation</strong>: Clear usage instructions and examples</li> </ul> <h3 id="configuration-management">Configuration Management<a class="headerlink" href="#configuration-management" title="Permanent link">¶</a></h3> <div class="language-groovy highlight"><pre><span></span><code><span id="__span-26-1"><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a><span class="c1">// Environment-specific settings</span>
</span><span id="__span-26-2"><a id="__codelineno-26-2" name="__codelineno-26-2" href="#__codelineno-26-2"></a><span class="n">profiles</span><span class="w"> </span><span class="o">{</span>
</span><span id="__span-26-3"><a id="__codelineno-26-3" name="__codelineno-26-3" href="#__codelineno-26-3"></a><span class="w">    </span><span class="n">standard</span><span class="w"> </span><span class="o">{</span>
</span><span id="__span-26-4"><a id="__codelineno-26-4" name="__codelineno-26-4" href="#__codelineno-26-4"></a><span class="w">        </span><span class="n">process</span><span class="o">.</span><span class="na">container</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'ubuntu:20.04'</span>
</span><span id="__span-26-5"><a id="__codelineno-26-5" name="__codelineno-26-5" href="#__codelineno-26-5"></a><span class="w">    </span><span class="o">}</span>
</span><span id="__span-26-6"><a id="__codelineno-26-6" name="__codelineno-26-6" href="#__codelineno-26-6"></a><span class="w">    </span><span class="n">docker</span><span class="w"> </span><span class="o">{</span>
</span><span id="__span-26-7"><a id="__codelineno-26-7" name="__codelineno-26-7" href="#__codelineno-26-7"></a><span class="w">        </span><span class="n">docker</span><span class="o">.</span><span class="na">enabled</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
</span><span id="__span-26-8"><a id="__codelineno-26-8" name="__codelineno-26-8" href="#__codelineno-26-8"></a><span class="w">        </span><span class="n">docker</span><span class="o">.</span><span class="na">runOptions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'-u $(id -u):$(id -g)'</span>
</span><span id="__span-26-9"><a id="__codelineno-26-9" name="__codelineno-26-9" href="#__codelineno-26-9"></a><span class="w">    </span><span class="o">}</span>
</span><span id="__span-26-10"><a id="__codelineno-26-10" name="__codelineno-26-10" href="#__codelineno-26-10"></a><span class="w">    </span><span class="n">singularity</span><span class="w"> </span><span class="o">{</span>
</span><span id="__span-26-11"><a id="__codelineno-26-11" name="__codelineno-26-11" href="#__codelineno-26-11"></a><span class="w">        </span><span class="n">singularity</span><span class="o">.</span><span class="na">enabled</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
</span><span id="__span-26-12"><a id="__codelineno-26-12" name="__codelineno-26-12" href="#__codelineno-26-12"></a><span class="w">        </span><span class="n">singularity</span><span class="o">.</span><span class="na">autoMounts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
</span><span id="__span-26-13"><a id="__codelineno-26-13" name="__codelineno-26-13" href="#__codelineno-26-13"></a><span class="w">    </span><span class="o">}</span>
</span><span id="__span-26-14"><a id="__codelineno-26-14" name="__codelineno-26-14" href="#__codelineno-26-14"></a><span class="o">}</span>
</span></code></pre></div> <h2 id="pipeline-development-workflow">Pipeline Development Workflow<a class="headerlink" href="#pipeline-development-workflow" title="Permanent link">¶</a></h2> <h3 id="1-planning-phase">1. Planning Phase<a class="headerlink" href="#1-planning-phase" title="Permanent link">¶</a></h3> <ul> <li>Define pipeline objectives and scope</li> <li>Identify required tools and dependencies</li> <li>Design modular architecture</li> <li>Plan testing and validation strategy</li> </ul> <h3 id="2-development-phase">2. Development Phase<a class="headerlink" href="#2-development-phase" title="Permanent link">¶</a></h3> <ul> <li>Create process definitions for each step</li> <li>Implement workflow logic and data flow</li> <li>Add configuration and parameterization</li> <li>Include error handling and logging</li> </ul> <h3 id="3-testing-phase">3. Testing Phase<a class="headerlink" href="#3-testing-phase" title="Permanent link">¶</a></h3> <ul> <li>Test individual processes with sample data</li> <li>Validate complete workflow execution</li> <li>Performance testing and optimization</li> <li>Edge case and error condition testing</li> </ul> <h3 id="4-deployment-phase">4. Deployment Phase<a class="headerlink" href="#4-deployment-phase" title="Permanent link">¶</a></h3> <ul> <li>Containerize tools and dependencies</li> <li>Create user documentation</li> <li>Set up continuous integration</li> <li>Community sharing and feedback</li> </ul> <h2 id="assessment-activities">Assessment Activities<a class="headerlink" href="#assessment-activities" title="Permanent link">¶</a></h2> <h3 id="individual-tasks">Individual Tasks<a class="headerlink" href="#individual-tasks" title="Permanent link">¶</a></h3> <ul> <li>Create simple Nextflow process for bioinformatics tool</li> <li>Develop multi-step pipeline with proper data flow</li> <li>Configure pipeline for different execution environments</li> <li>Test pipeline with provided datasets</li> </ul> <h3 id="group-exercise">Group Exercise<a class="headerlink" href="#group-exercise" title="Permanent link">¶</a></h3> <ul> <li>Collaborate on pipeline feature development</li> <li>Review and optimize pipeline code</li> <li>Share experiences with different configuration profiles</li> <li>Troubleshoot common pipeline issues</li> </ul> <h2 id="common-challenges">Common Challenges<a class="headerlink" href="#common-challenges" title="Permanent link">¶</a></h2> <h3 id="resource-management">Resource Management<a class="headerlink" href="#resource-management" title="Permanent link">¶</a></h3> <div class="language-groovy highlight"><pre><span></span><code><span id="__span-27-1"><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a><span class="c1">// Dynamic resource allocation</span>
</span><span id="__span-27-2"><a id="__codelineno-27-2" name="__codelineno-27-2" href="#__codelineno-27-2"></a><span class="n">process</span><span class="w"> </span><span class="n">ASSEMBLY</span><span class="w"> </span><span class="o">{</span>
</span><span id="__span-27-3"><a id="__codelineno-27-3" name="__codelineno-27-3" href="#__codelineno-27-3"></a><span class="w">    </span><span class="n">memory</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="mi">4</span><span class="o">.</span><span class="na">GB</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">task</span><span class="o">.</span><span class="na">attempt</span><span class="w"> </span><span class="o">}</span>
</span><span id="__span-27-4"><a id="__codelineno-27-4" name="__codelineno-27-4" href="#__codelineno-27-4"></a><span class="w">    </span><span class="n">time</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="na">h</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">task</span><span class="o">.</span><span class="na">attempt</span><span class="w"> </span><span class="o">}</span>
</span><span id="__span-27-5"><a id="__codelineno-27-5" name="__codelineno-27-5" href="#__codelineno-27-5"></a><span class="w">    </span><span class="n">errorStrategy</span><span class="w"> </span><span class="s1">'retry'</span>
</span><span id="__span-27-6"><a id="__codelineno-27-6" name="__codelineno-27-6" href="#__codelineno-27-6"></a><span class="w">    </span><span class="n">maxRetries</span><span class="w"> </span><span class="mi">3</span>
</span><span id="__span-27-7"><a id="__codelineno-27-7" name="__codelineno-27-7" href="#__codelineno-27-7"></a>
</span><span id="__span-27-8"><a id="__codelineno-27-8" name="__codelineno-27-8" href="#__codelineno-27-8"></a><span class="w">    </span><span class="nl">script:</span>
</span><span id="__span-27-9"><a id="__codelineno-27-9" name="__codelineno-27-9" href="#__codelineno-27-9"></a><span class="w">    </span><span class="s2">"""</span>
</span><span id="__span-27-10"><a id="__codelineno-27-10" name="__codelineno-27-10" href="#__codelineno-27-10"></a><span class="s2">    spades.py --memory ${task.memory.toGiga()} -t ${task.cpus} ...</span>
</span><span id="__span-27-11"><a id="__codelineno-27-11" name="__codelineno-27-11" href="#__codelineno-27-11"></a><span class="s2">    """</span>
</span><span id="__span-27-12"><a id="__codelineno-27-12" name="__codelineno-27-12" href="#__codelineno-27-12"></a><span class="o">}</span>
</span></code></pre></div> <h3 id="data-staging-issues">Data Staging Issues<a class="headerlink" href="#data-staging-issues" title="Permanent link">¶</a></h3> <div class="language-groovy highlight"><pre><span></span><code><span id="__span-28-1"><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a><span class="c1">// Proper input handling</span>
</span><span id="__span-28-2"><a id="__codelineno-28-2" name="__codelineno-28-2" href="#__codelineno-28-2"></a><span class="n">process</span><span class="w"> </span><span class="n">ANALYSIS</span><span class="w"> </span><span class="o">{</span>
</span><span id="__span-28-3"><a id="__codelineno-28-3" name="__codelineno-28-3" href="#__codelineno-28-3"></a><span class="w">    </span><span class="n">stageInMode</span><span class="w"> </span><span class="s1">'copy'</span><span class="w">  </span><span class="c1">// Ensure file availability</span>
</span><span id="__span-28-4"><a id="__codelineno-28-4" name="__codelineno-28-4" href="#__codelineno-28-4"></a><span class="w">    </span><span class="n">scratch</span><span class="w"> </span><span class="kc">true</span><span class="w">        </span><span class="c1">// Use local scratch space</span>
</span><span id="__span-28-5"><a id="__codelineno-28-5" name="__codelineno-28-5" href="#__codelineno-28-5"></a>
</span><span id="__span-28-6"><a id="__codelineno-28-6" name="__codelineno-28-6" href="#__codelineno-28-6"></a><span class="w">    </span><span class="nl">input:</span>
</span><span id="__span-28-7"><a id="__codelineno-28-7" name="__codelineno-28-7" href="#__codelineno-28-7"></a><span class="w">    </span><span class="n">path</span><span class="o">(</span><span class="n">large_file</span><span class="o">)</span>
</span><span id="__span-28-8"><a id="__codelineno-28-8" name="__codelineno-28-8" href="#__codelineno-28-8"></a>
</span><span id="__span-28-9"><a id="__codelineno-28-9" name="__codelineno-28-9" href="#__codelineno-28-9"></a><span class="w">    </span><span class="nl">script:</span>
</span><span id="__span-28-10"><a id="__codelineno-28-10" name="__codelineno-28-10" href="#__codelineno-28-10"></a><span class="w">    </span><span class="s2">"""</span>
</span><span id="__span-28-11"><a id="__codelineno-28-11" name="__codelineno-28-11" href="#__codelineno-28-11"></a><span class="s2">    # Process large file locally</span>
</span><span id="__span-28-12"><a id="__codelineno-28-12" name="__codelineno-28-12" href="#__codelineno-28-12"></a><span class="s2">    analysis_tool ${large_file}</span>
</span><span id="__span-28-13"><a id="__codelineno-28-13" name="__codelineno-28-13" href="#__codelineno-28-13"></a><span class="s2">    """</span>
</span><span id="__span-28-14"><a id="__codelineno-28-14" name="__codelineno-28-14" href="#__codelineno-28-14"></a><span class="o">}</span>
</span></code></pre></div> <h3 id="container-compatibility">Container Compatibility<a class="headerlink" href="#container-compatibility" title="Permanent link">¶</a></h3> <div class="language-groovy highlight"><pre><span></span><code><span id="__span-29-1"><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a><span class="c1">// Container-specific configurations</span>
</span><span id="__span-29-2"><a id="__codelineno-29-2" name="__codelineno-29-2" href="#__codelineno-29-2"></a><span class="n">process</span><span class="w"> </span><span class="o">{</span>
</span><span id="__span-29-3"><a id="__codelineno-29-3" name="__codelineno-29-3" href="#__codelineno-29-3"></a><span class="w">    </span><span class="nl">withName:</span><span class="w"> </span><span class="n">SPECIAL_TOOL</span><span class="w"> </span><span class="o">{</span>
</span><span id="__span-29-4"><a id="__codelineno-29-4" name="__codelineno-29-4" href="#__codelineno-29-4"></a><span class="w">        </span><span class="n">container</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'custom/special-tool:v1.0'</span>
</span><span id="__span-29-5"><a id="__codelineno-29-5" name="__codelineno-29-5" href="#__codelineno-29-5"></a><span class="w">        </span><span class="n">containerOptions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'--user root'</span>
</span><span id="__span-29-6"><a id="__codelineno-29-6" name="__codelineno-29-6" href="#__codelineno-29-6"></a><span class="w">    </span><span class="o">}</span>
</span><span id="__span-29-7"><a id="__codelineno-29-7" name="__codelineno-29-7" href="#__codelineno-29-7"></a><span class="o">}</span>
</span></code></pre></div> <h2 id="resources">Resources<a class="headerlink" href="#resources" title="Permanent link">¶</a></h2> <h3 id="documentation">Documentation<a class="headerlink" href="#documentation" title="Permanent link">¶</a></h3> <ul> <li><a href="https://nextflow.io/docs/latest/">Nextflow Documentation</a></li> <li><a href="https://nf-co.re/">nf-core Website</a></li> <li><a href="https://nextflow-io.github.io/patterns/">Nextflow Patterns</a></li> </ul> <h3 id="training-materials">Training Materials<a class="headerlink" href="#training-materials" title="Permanent link">¶</a></h3> <ul> <li><a href="https://training.nextflow.io/">Nextflow Training</a></li> <li><a href="https://nf-co.re/events/bytesize">nf-core Bytesize Talks</a></li> <li><a href="https://community.seqera.io/">Seqera Community Forum</a></li> </ul> <h3 id="development-tools">Development Tools<a class="headerlink" href="#development-tools" title="Permanent link">¶</a></h3> <ul> <li><a href="https://nf-co.re/tools">nf-core tools</a></li> <li><a href="https://marketplace.visualstudio.com/items?itemName=nextflow.nextflow">Nextflow VS Code Extension</a></li> <li><a href="https://nf-test.com/">nf-test Framework</a></li> </ul> <h2 id="looking-ahead">Looking Ahead<a class="headerlink" href="#looking-ahead" title="Permanent link">¶</a></h2> <p><strong>Course Completion</strong>: You now have the skills to:</p> <ul> <li>Develop reproducible bioinformatics workflows for clinical and research applications</li> <li>Apply quality control and analysis methods to microbial genomics data</li> <li>Use version control for collaborative development and sharing</li> <li>Deploy pipelines across different platforms (local, HPC, cloud)</li> <li>Optimize performance and troubleshoot complex pipeline issues</li> </ul> <h3 id="next-steps-for-your-research">Next Steps for Your Research<a class="headerlink" href="#next-steps-for-your-research" title="Permanent link">¶</a></h3> <ul> <li><strong>Apply to Your Data</strong>: Adapt these pipelines to your specific research questions</li> <li><strong>Join the Community</strong>: Contribute to nf-core and share your pipelines</li> <li><strong>Continue Learning</strong>: Explore advanced Nextflow features and cloud deployment</li> <li><strong>Collaborate</strong>: Use version control and sharing practices for team projects</li> </ul> <h3 id="real-world-applications">Real-world Applications<a class="headerlink" href="#real-world-applications" title="Permanent link">¶</a></h3> <p>The skills you've learned enable you to:</p> <ul> <li><strong>Clinical Genomics</strong>: Develop diagnostic pipelines for pathogen identification</li> <li><strong>Outbreak Investigation</strong>: Build transmission analysis workflows</li> <li><strong>Research Collaboration</strong>: Share reproducible analysis methods</li> <li><strong>High-throughput Analysis</strong>: Scale pipelines for large datasets</li> <li><strong>Multi-platform Deployment</strong>: Run pipelines from laptop to cloud</li> </ul> <hr> <h2 id="day-7-completion-from-beginner-to-pipeline-developer">Day 7 Completion: From Beginner to Pipeline Developer<a class="headerlink" href="#day-7-completion-from-beginner-to-pipeline-developer" title="Permanent link">¶</a></h2> <div id="completion-summary" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 30px; border-radius: 12px; margin: 30px 0;"> <h3 style="color: white; margin-top: 0;">🎓 Congratulations! You've Completed Advanced Nextflow Training</h3> <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0;"> <div style="background: rgba(255,255,255,0.1); padding: 20px; border-radius: 8px;"> <h4 style="color: white; margin-top: 0;">📈 Your Journey</h4> <ul style="color: white; margin: 0;"> <li><strong>Day 6:</strong> Nextflow fundamentals</li> <li><strong>Day 7:</strong> Professional development</li> <li><strong>Result:</strong> Production-ready skills</li> </ul> </div> <div style="background: rgba(255,255,255,0.1); padding: 20px; border-radius: 8px;"> <h4 style="color: white; margin-top: 0;">🛠️ Skills Mastered</h4> <ul style="color: white; margin: 0;"> <li>Modular pipeline architecture</li> <li>Git/GitHub collaboration</li> <li>Advanced Nextflow features</li> <li>Multi-platform deployment</li> </ul> </div> </div> <div style="text-align: center; margin-top: 25px; padding: 20px; background: rgba(255,255,255,0.1); border-radius: 8px;"> <h4 style="color: white; margin-top: 0;">🌟 You're Now Ready For:</h4> <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-top: 15px;"> <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 5px;"> <strong>🏥 Clinical Genomics</strong><br> <small>Diagnostic pipeline development</small> </div> <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 5px;"> <strong>🔬 Research Leadership</strong><br> <small>Leading bioinformatics projects</small> </div> <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 5px;"> <strong>🌍 Community Impact</strong><br> <small>Contributing to global health</small> </div> <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 5px;"> <strong>☁️ Enterprise Deployment</strong><br> <small>Institutional-scale pipelines</small> </div> </div> </div> </div> <h3 id="your-next-steps">Your Next Steps<a class="headerlink" href="#your-next-steps" title="Permanent link">¶</a></h3> <div id="next-steps" style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin: 20px 0;"> <h4>🚀 Continue Your Bioinformatics Journey</h4> <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin: 20px 0;"> <div style="background: white; padding: 20px; border-radius: 8px; border-left: 4px solid #2196f3;"> <h5>📚 Immediate Actions</h5> <ul> <li>Apply these skills to your research data</li> <li>Share your pipeline on GitHub</li> <li>Join the nf-core community</li> <li>Start a bioinformatics journal club</li> </ul> </div> <div style="background: white; padding: 20px; border-radius: 8px; border-left: 4px solid #4caf50;"> <h5>🌱 Continued Learning</h5> <ul> <li>Explore nf-core community pipelines</li> <li>Learn cloud deployment (AWS, GCP, Azure)</li> <li>Study advanced bioinformatics algorithms</li> <li>Contribute to open-source projects</li> </ul> </div> <div style="background: white; padding: 20px; border-radius: 8px; border-left: 4px solid #ff9800;"> <h5>🤝 Community Engagement</h5> <ul> <li>Attend bioinformatics conferences</li> <li>Mentor other researchers</li> <li>Collaborate on international projects</li> <li>Publish your methods and pipelines</li> </ul> </div> </div> </div> <h3 id="resources-for-continued-growth">Resources for Continued Growth<a class="headerlink" href="#resources-for-continued-growth" title="Permanent link">¶</a></h3> <p><strong>Essential Communities:</strong> - <a href="https://nf-co.re/">nf-core</a> - Community-curated bioinformatics pipelines - <a href="https://nextflow.io/slack-invite.html">Nextflow Slack</a> - Get help and share knowledge - <a href="https://community.seqera.io/">Seqera Community</a> - Advanced discussions and support</p> <p><strong>Advanced Learning:</strong> - <a href="https://nextflow-io.github.io/patterns/">Nextflow Patterns</a> - Best practices and design patterns - <a href="https://nf-co.re/events/bytesize">nf-core Bytesize</a> - Weekly technical talks - <a href="https://carpentries-incubator.github.io/">Carpentries Incubator</a> - Community-developed lessons</p> <p><strong>Professional Development:</strong> - <a href="https://www.iscb.org/">ISCB</a> - International Society for Computational Biology - <a href="https://training.galaxyproject.org/">Galaxy Training</a> - Complementary workflow system - <a href="https://bioconductor.org/">Bioconductor</a> - R packages for bioinformatics</p> <hr> <p><strong>🎯 Key Learning Outcome</strong>: You now have the expertise to develop, optimize, and deploy production-ready bioinformatics pipelines that can scale from laptop to cloud, enabling reproducible and collaborative genomics research that can make a real impact in clinical and public health applications.</p> <p><strong>🌟 Remember</strong>: The skills you've learned today aren't just technical - they're tools for advancing human health through computational biology. Use them wisely, share them generously, and continue learning always.</p> </article> </div> <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type="button" class="md-top md-icon" data-md-component="top" hidden> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"></path></svg> Back to top </button> </main> <footer class="md-footer"> <nav class="md-footer__inner md-grid" aria-label="Footer"> <a href="../day6/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Day 6 - Nextflow Pipeline Development &amp; Version Control with GitHub"> <div class="md-footer__button md-icon"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg> </div> <div class="md-footer__title"> <span class="md-footer__direction"> Previous </span> <div class="md-ellipsis"> Day 6 - Nextflow Pipeline Development &amp; Version Control with GitHub </div> </div> </a> <a href="../day8/" class="md-footer__link md-footer__link--next" aria-label="Next: Day 8 - Comparative Genomics"> <div class="md-footer__title"> <span class="md-footer__direction"> Next </span> <div class="md-ellipsis"> Day 8 - Comparative Genomics </div> </div> <div class="md-footer__button md-icon"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"></path></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class="md-copyright"> <div class="md-copyright__highlight"> Copyright © 2024 CIDRI-Africa </div> Made with <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener"> Material for MkDocs </a> </div> <div class="md-social"> <a href="https://github.com/CIDRI-Africa" target="_blank" rel="noopener" title="github.com" class="md-social__link"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"></path></svg> </a> <a href="https://twitter.com/CIDRIAfrica" target="_blank" rel="noopener" title="twitter.com" class="md-social__link"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M459.4 151.7c.3 4.5.3 9.1.3 13.6 0 138.7-105.6 298.6-298.6 298.6-59.5 0-114.7-17.2-161.1-47.1 8.4 1 16.6 1.3 25.3 1.3 49.1 0 94.2-16.6 130.3-44.8-46.1-1-84.8-31.2-98.1-72.8 6.5 1 13 1.6 19.8 1.6 9.4 0 18.8-1.3 27.6-3.6-48.1-9.7-84.1-52-84.1-103v-1.3c14 7.8 30.2 12.7 47.4 13.3-28.3-18.8-46.8-51-46.8-87.4 0-19.5 5.2-37.4 14.3-53C87.4 130.8 165 172.4 252.1 176.9c-1.6-7.8-2.6-15.9-2.6-24C249.5 95.1 296.3 48 354.4 48c30.2 0 57.5 12.7 76.7 33.1 23.7-4.5 46.5-13.3 66.6-25.3-7.8 24.4-24.4 44.8-46.1 57.8 21.1-2.3 41.6-8.1 60.4-16.2-14.3 20.8-32.2 39.3-52.6 54.3"></path></svg> </a> </div> </div> </div> </footer> </div> <div class="md-dialog" data-md-component="dialog"> <div class="md-dialog__inner md-typeset"></div> </div> <div class="md-progress" data-md-component="progress" role="progressbar"></div> <script id="__config" type="application/json">{"base": "../..", "features": ["announce.dismiss", "content.action.edit", "content.action.view", "content.code.annotate", "content.code.copy", "content.code.select", "content.tabs.link", "content.tooltips", "header.autohide", "navigation.expand", "navigation.footer", "navigation.indexes", "navigation.instant", "navigation.instant.prefetch", "navigation.instant.progress", "navigation.prune", "navigation.sections", "navigation.tabs", "navigation.tabs.sticky", "navigation.top", "navigation.tracking", "search.highlight", "search.share", "search.suggest", "toc.follow", "toc.integrate"], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script> <script src="../../assets/javascripts/bundle.92b07e13.min.js"></script> <script src="../../javascripts/extra.js"></script> <script src="../../javascripts/mathjax.js"></script> <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>  <script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(()=>{ lightbox.reload(); });
</script></body></html>